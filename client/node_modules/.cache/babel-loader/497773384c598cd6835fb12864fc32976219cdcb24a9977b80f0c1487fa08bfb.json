{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Alex\\\\Desktop\\\\Licenta\\\\Proiect\\\\Placeholder\\\\client\\\\src\\\\pages\\\\Invest.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState, useCallback } from \"react\";\nimport portrait from \"../imgs/default-pp.jpg\";\nimport axios from \"axios\";\nimport \"../Dashboard.css\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { Line } from \"react-chartjs-2\";\nimport Chart from \"chart.js/auto\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function DashboardInvest() {\n  _s();\n  const [isLoggedIn, setIsLoggedIn] = useState();\n  const [modal, setModal] = useState(false);\n  const [username, setUsername] = useState(\"\");\n  const navigate = useNavigate();\n  const [assetSymbolA, setAssetSymbolA] = useState(\"\");\n  const [assetSymbolB, setAssetSymbolB] = useState(\"\");\n  const [assetSymbolC, setAssetSymbolC] = useState(\"\");\n  const [assetSymbolD, setAssetSymbolD] = useState(\"\");\n  const [searchStateA, setSearchStateA] = useState({\n    companyName: \"\",\n    hasSearched: false,\n    suggestions: []\n  });\n  const [searchStateB, setSearchStateB] = useState({\n    companyName: \"\",\n    hasSearched: false,\n    suggestions: []\n  });\n  const [searchStateC, setSearchStateC] = useState({\n    companyName: \"\",\n    hasSearched: false,\n    suggestions: []\n  });\n  const [searchStateD, setSearchStateD] = useState({\n    companyName: \"\",\n    hasSearched: false,\n    suggestions: []\n  });\n  const [searchResultA, setSearchResultA] = useState(null);\n  const [searchResultB, setSearchResultB] = useState(null);\n  const [searchResultC, setSearchResultC] = useState(null);\n  const [searchResultD, setSearchResultD] = useState(null);\n  const [searchWarningA, setSearchWarningA] = useState(\"Please search for an asset\");\n  const [searchWarningB, setSearchWarningB] = useState(\"Please search for an asset\");\n  const [searchWarningC, setSearchWarningC] = useState(\"Please search for an asset\");\n  const [searchWarningD, setSearchWarningD] = useState(\"Please search for an asset\");\n  const [showInputA, setShowInputA] = useState(true);\n  const [showInputB, setShowInputB] = useState(true);\n  const [showInputC, setShowInputC] = useState(true);\n  const [showInputD, setShowInputD] = useState(true);\n  const [showSearchAgainButtonA, setShowSearchAgainButtonA] = useState(false);\n  const [showSearchAgainButtonB, setShowSearchAgainButtonB] = useState(false);\n  const [showSearchAgainButtonC, setShowSearchAgainButtonC] = useState(false);\n  const [showSearchAgainButtonD, setShowSearchAgainButtonD] = useState(false);\n  const getYesterday = () => {\n    const today = new Date();\n    today.setDate(today.getDate() - 1);\n    return today.toISOString().split(\"T\")[0];\n  };\n  const [startDate, setStartDate] = useState(\"\");\n  const [endDate, setEndDate] = useState(\"\");\n  const [interval, setInterval] = useState(\"\");\n  const [lineChartData, setLineChartData] = useState({});\n  const [filteredDataA, setFilteredDataA] = useState([]);\n  const [filteredDataB, setFilteredDataB] = useState([]);\n  const [filteredDataC, setFilteredDataC] = useState([]);\n  const [filteredDataD, setFilteredDataD] = useState([]);\n  const [historicalDates, setHistoricalDates] = useState([]);\n  const [buttonNextDisabled, setButtonNextDisabled] = useState(true);\n  const [showSelectAssets, setShowSelectAssets] = useState(false);\n  const [showStartDate, setShowStartDate] = useState(false);\n  const [showEndDate, setShowEndDate] = useState(false);\n  const [showInterval, setShowInterval] = useState(false);\n  const [showNext, setShowNext] = useState(false);\n  const wrapperRefA = useRef(null);\n  const wrapperRefB = useRef(null);\n  const wrapperRefC = useRef(null);\n  const wrapperRefD = useRef(null);\n  const wrapperRefSelectAssets = useRef(null);\n  const wrapperRefStartDate = useRef(null);\n  const wrapperRefEndDate = useRef(null);\n  const wrapperRefInterval = useRef(null);\n  const chartContainerRef = useRef(null);\n  const chartInstanceRef = useRef(null);\n  const [assetsReturn, setAssetsReturn] = useState([]);\n  const [assetsVol, setAssetsVol] = useState([]);\n  const [assetsCorrelationMatrix, setAssetsCorrelationMatrix] = useState([]);\n  const [monteCarloPortfolios, setMonteCarloPortfolios] = useState([]);\n  const [efficientFrontierData, setEfficientFrontierData] = useState([]);\n  const [riskFreeRate, setRiskFreeRate] = useState(null);\n  const [clickedInfos, setClickedInfos] = useState([]);\n  const [lastValidSearchResultA, setLastValidSearchResultA] = useState(null);\n  const [lastValidSearchResultB, setLastValidSearchResultB] = useState(null);\n  const [lastValidSearchResultC, setLastValidSearchResultC] = useState(null);\n  const [lastValidSearchResultD, setLastValidSearchResultD] = useState(null);\n  const apiKey = \"VHfZ1hD7PgRzcghHku0BmQ4ki5erDFjN\";\n\n  // Check user's login status\n  useEffect(() => {\n    const checkLoginStatus = async () => {\n      try {\n        const response = await axios.get(\"http://localhost:3002\", {\n          withCredentials: true // Sending cookies with the request\n        });\n        const {\n          valid,\n          username\n        } = response.data; // Destructuring response data\n        setIsLoggedIn(valid); // Setting login status\n        setUsername(username); // Setting username\n      } catch (error) {\n        console.error(\"Error checking login status:\", error); // Handling error\n      }\n    };\n    checkLoginStatus(); // Calling function to check login status\n  }, []);\n\n  // Redirect if not logged in\n  useEffect(() => {\n    if (isLoggedIn === false) {\n      navigate(\"/login\"); // Redirecting to login page\n    }\n  }, [isLoggedIn, navigate]);\n\n  // Function to toggle the Log out modal visibility\n  const toggleModal = () => {\n    setModal(!modal); // Toggling modal state\n  };\n\n  // Add/remove class for modal\n  useEffect(() => {\n    if (modal) {\n      document.body.classList.add(\"active-modal\"); // Adding class to body for active modal\n    } else {\n      document.body.classList.remove(\"active-modal\"); // Removing class from body\n    }\n  }, [modal]);\n  const handleSelectAssetsClick = event => {\n    event.stopPropagation();\n    setShowSelectAssets(prev => !prev);\n  };\n  const handleStartDateClick = event => {\n    event.stopPropagation();\n    setShowStartDate(prev => !prev);\n  };\n  const handleEndDateClick = event => {\n    event.stopPropagation();\n    setShowEndDate(prev => !prev);\n  };\n  const handleIntervalClick = event => {\n    event.stopPropagation();\n    setShowInterval(prev => !prev);\n  };\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (wrapperRefSelectAssets.current && !wrapperRefSelectAssets.current.contains(event.target)) {\n        setShowSelectAssets(false);\n      }\n    };\n    if (showSelectAssets) {\n      document.addEventListener(\"mousedown\", handleClickOutside);\n    } else {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    }\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [showSelectAssets]);\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (wrapperRefStartDate.current && !wrapperRefStartDate.current.contains(event.target)) {\n        setShowStartDate(false);\n      }\n    };\n    if (showStartDate) {\n      document.addEventListener(\"mousedown\", handleClickOutside);\n    } else {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    }\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [showStartDate]);\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (wrapperRefEndDate.current && !wrapperRefEndDate.current.contains(event.target)) {\n        setShowEndDate(false);\n      }\n    };\n    if (showEndDate) {\n      document.addEventListener(\"mousedown\", handleClickOutside);\n    } else {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    }\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [showEndDate]);\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (wrapperRefInterval.current && !wrapperRefInterval.current.contains(event.target)) {\n        setShowInterval(false);\n      }\n    };\n    if (showInterval) {\n      document.addEventListener(\"mousedown\", handleClickOutside);\n    } else {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    }\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [showInterval]);\n  useEffect(() => {\n    function handleClickOutside(event) {\n      if (wrapperRefA.current && !wrapperRefA.current.contains(event.target)) {\n        setSearchStateA(prevState => ({\n          ...prevState,\n          suggestions: []\n        }));\n        setSearchWarningA(\"Please search for an asset\");\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [wrapperRefA]);\n  useEffect(() => {\n    function handleClickOutside(event) {\n      if (wrapperRefB.current && !wrapperRefB.current.contains(event.target)) {\n        setSearchStateB(prevState => ({\n          ...prevState,\n          suggestions: []\n        }));\n        setSearchWarningB(\"Please search for an asset\");\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [wrapperRefB]);\n  useEffect(() => {\n    function handleClickOutside(event) {\n      if (wrapperRefC.current && !wrapperRefC.current.contains(event.target)) {\n        setSearchStateC(prevState => ({\n          ...prevState,\n          suggestions: []\n        }));\n        setSearchWarningC(\"Please search for an asset\");\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [wrapperRefC]);\n  useEffect(() => {\n    function handleClickOutside(event) {\n      if (wrapperRefD.current && !wrapperRefD.current.contains(event.target)) {\n        setSearchStateD(prevState => ({\n          ...prevState,\n          suggestions: []\n        }));\n        setSearchWarningD(\"Please search for an asset\");\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [wrapperRefD]);\n\n  // Handle input change for asset A\n  const handleInputChangeA = e => {\n    const input = e.target.value.trim(); // Trim input value\n    setSearchStateA(prevState => ({\n      ...prevState,\n      companyName: input\n    })); // Set company name in search state\n\n    if (!input) {\n      setSearchStateA(prevState => ({\n        ...prevState,\n        suggestions: []\n      })); // Clear suggestions if input is empty\n      return;\n    }\n    fetch(`https://financialmodelingprep.com/api/v3/search?query=${input}&limit=5&apikey=${apiKey}`) // Fetch search suggestions\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`); // Handle HTTP error\n      }\n      return response.json(); // Parse response as JSON\n    }).then(data => {\n      if (!data) {\n        console.error(\"Error: Data is null\"); // Handle null data\n        setSearchStateA(prevState => ({\n          ...prevState,\n          suggestions: []\n        }));\n        setSearchResultA(null);\n        setSearchWarningA(\"No matching company found\"); // Clear suggestions\n        return;\n      }\n      const profilePromises = data.map(item => fetch(`https://financialmodelingprep.com/api/v3/profile/${item.symbol}?apikey=${apiKey}`).then(response => response.json()).then(profileData => ({\n        ...item,\n        profile: profileData[0]\n      })));\n      setSearchWarningA(\"\");\n      Promise.all(profilePromises).then(profiles => {\n        const filteredSuggestions = profiles.filter(profile => profile.profile && profile.profile.currency === \"USD\").map(profile => ({\n          name: profile.name,\n          symbol: profile.symbol\n        }));\n        setSearchStateA(prevState => ({\n          ...prevState,\n          suggestions: filteredSuggestions\n        })); // Set filtered suggestions\n      }).catch(error => {\n        console.error(\"Error fetching profiles:\", error); // Handle fetch error\n        setSearchStateA(prevState => ({\n          ...prevState,\n          suggestions: []\n        })); // Clear suggestions\n      });\n    }).catch(error => {\n      console.error(\"Error fetching suggestions:\", error); // Handle fetch error\n      setSearchStateA(prevState => ({\n        ...prevState,\n        suggestions: []\n      })); // Clear suggestions\n    });\n  };\n\n  // Handle input change for asset B\n  const handleInputChangeB = e => {\n    const input = e.target.value.trim(); // Trim input value\n    setSearchStateB(prevState => ({\n      ...prevState,\n      companyName: input\n    })); // Set company name in search state\n\n    if (!input) {\n      setSearchStateB(prevState => ({\n        ...prevState,\n        suggestions: []\n      })); // Clear suggestions if input is empty\n      return;\n    }\n    fetch(`https://financialmodelingprep.com/api/v3/search?query=${input}&limit=5&apikey=${apiKey}`) // Fetch search suggestions\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`); // Handle HTTP error\n      }\n      return response.json(); // Parse response as JSON\n    }).then(data => {\n      if (!data) {\n        console.error(\"Error: Data is null\"); // Handle null data\n        setSearchStateB(prevState => ({\n          ...prevState,\n          suggestions: []\n        })); // Clear suggestions\n        setSearchResultB(null);\n        setSearchWarningB(\"No matching company found\"); // Clear suggestions\n        return;\n      }\n      const profilePromises = data.map(item => fetch(`https://financialmodelingprep.com/api/v3/profile/${item.symbol}?apikey=${apiKey}`).then(response => response.json()).then(profileData => ({\n        ...item,\n        profile: profileData[0]\n      })));\n      setSearchWarningB(\"\");\n      Promise.all(profilePromises).then(profiles => {\n        const filteredSuggestions = profiles.filter(profile => profile.profile && profile.profile.currency === \"USD\").map(profile => ({\n          name: profile.name,\n          symbol: profile.symbol\n        }));\n        setSearchStateB(prevState => ({\n          ...prevState,\n          suggestions: filteredSuggestions\n        })); // Set filtered suggestions\n      }).catch(error => {\n        console.error(\"Error fetching profiles:\", error); // Handle fetch error\n        setSearchStateB(prevState => ({\n          ...prevState,\n          suggestions: []\n        })); // Clear suggestions\n      });\n    }).catch(error => {\n      console.error(\"Error fetching suggestions:\", error); // Handle fetch error\n      setSearchStateB(prevState => ({\n        ...prevState,\n        suggestions: []\n      })); // Clear suggestions\n    });\n  };\n  const handleInputChangeC = e => {\n    const input = e.target.value.trim(); // Trim input value\n    setSearchStateC(prevState => ({\n      ...prevState,\n      companyName: input\n    })); // Set company name in search state\n\n    if (!input) {\n      setSearchStateC(prevState => ({\n        ...prevState,\n        suggestions: []\n      })); // Clear suggestions if input is empty\n      return;\n    }\n    fetch(`https://financialmodelingprep.com/api/v3/search?query=${input}&limit=5&apikey=${apiKey}`) // Fetch search suggestions\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`); // Handle HTTP error\n      }\n      return response.json(); // Parse response as JSON\n    }).then(data => {\n      if (!data) {\n        console.error(\"Error: Data is null\"); // Handle null data\n        setSearchStateC(prevState => ({\n          ...prevState,\n          suggestions: []\n        }));\n        setSearchResultC(null);\n        setSearchWarningC(\"No matching company found\"); // Clear suggestions\n        return;\n      }\n      const profilePromises = data.map(item => fetch(`https://financialmodelingprep.com/api/v3/profile/${item.symbol}?apikey=${apiKey}`).then(response => response.json()).then(profileData => ({\n        ...item,\n        profile: profileData[0]\n      })));\n      setSearchWarningC(\"\");\n      Promise.all(profilePromises).then(profiles => {\n        const filteredSuggestions = profiles.filter(profile => profile.profile && profile.profile.currency === \"USD\").map(profile => ({\n          name: profile.name,\n          symbol: profile.symbol\n        }));\n        setSearchStateC(prevState => ({\n          ...prevState,\n          suggestions: filteredSuggestions\n        })); // Set filtered suggestions\n      }).catch(error => {\n        console.error(\"Error fetching profiles:\", error); // Handle fetch error\n        setSearchStateC(prevState => ({\n          ...prevState,\n          suggestions: []\n        })); // Clear suggestions\n      });\n    }).catch(error => {\n      console.error(\"Error fetching suggestions:\", error); // Handle fetch error\n      setSearchStateC(prevState => ({\n        ...prevState,\n        suggestions: []\n      })); // Clear suggestions\n    });\n  };\n  const handleInputChangeD = e => {\n    const input = e.target.value.trim(); // Trim input value\n    setSearchStateD(prevState => ({\n      ...prevState,\n      companyName: input\n    })); // Set company name in search state\n\n    if (!input) {\n      setSearchStateD(prevState => ({\n        ...prevState,\n        suggestions: []\n      })); // Clear suggestions if input is empty\n      return;\n    }\n    fetch(`https://financialmodelingprep.com/api/v3/search?query=${input}&limit=5&apikey=${apiKey}`) // Fetch search suggestions\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`); // Handle HTTP error\n      }\n      return response.json(); // Parse response as JSON\n    }).then(data => {\n      if (!data) {\n        console.error(\"Error: Data is null\"); // Handle null data\n        setSearchStateD(prevState => ({\n          ...prevState,\n          suggestions: []\n        }));\n        setSearchResultD(null);\n        setSearchWarningD(\"No matching company found\"); // Clear suggestions\n        return;\n      }\n      const profilePromises = data.map(item => fetch(`https://financialmodelingprep.com/api/v3/profile/${item.symbol}?apikey=${apiKey}`).then(response => response.json()).then(profileData => ({\n        ...item,\n        profile: profileData[0]\n      })));\n      setSearchWarningD(\"\");\n      Promise.all(profilePromises).then(profiles => {\n        const filteredSuggestions = profiles.filter(profile => profile.profile && profile.profile.currency === \"USD\").map(profile => ({\n          name: profile.name,\n          symbol: profile.symbol\n        }));\n        setSearchStateD(prevState => ({\n          ...prevState,\n          suggestions: filteredSuggestions\n        })); // Set filtered suggestions\n      }).catch(error => {\n        console.error(\"Error fetching profiles:\", error); // Handle fetch error\n        setSearchStateD(prevState => ({\n          ...prevState,\n          suggestions: []\n        })); // Clear suggestions\n      });\n    }).catch(error => {\n      console.error(\"Error fetching suggestions:\", error); // Handle fetch error\n      setSearchStateD(prevState => ({\n        ...prevState,\n        suggestions: []\n      })); // Clear suggestions\n    });\n  };\n\n  // Function to handle click on a suggestion for asset A\n  const handleSuggestionClickA = (name, symbol) => {\n    setSearchResultA([{\n      name,\n      symbol\n    }]);\n    setLastValidSearchResultA([{\n      name,\n      symbol\n    }]);\n    setSearchStateA({\n      ...searchStateA,\n      companyName: \"\",\n      suggestions: [] // Clear suggestions\n    });\n    setShowInputA(false); // Hiding input field\n    setShowSearchAgainButtonA(true); // Showing search again button\n    setAssetSymbolA(symbol ? symbol : \"\"); // Setting asset symbol\n  };\n\n  // Function to handle click on a suggestion for asset B\n  const handleSuggestionClickB = (name, symbol) => {\n    setSearchResultB([{\n      name,\n      symbol\n    }]);\n    setLastValidSearchResultB([{\n      name,\n      symbol\n    }]);\n    setSearchStateB({\n      ...searchStateB,\n      companyName: \"\",\n      suggestions: [] // Clear suggestions\n    });\n    setShowInputB(false); // Hiding input field\n    setShowSearchAgainButtonB(true); // Showing search again button\n    setAssetSymbolB(symbol ? symbol : \"\"); // Setting asset symbol\n  };\n  const handleSuggestionClickC = (name, symbol) => {\n    setSearchResultC([{\n      name,\n      symbol\n    }]);\n    setLastValidSearchResultC([{\n      name,\n      symbol\n    }]);\n    setSearchStateC({\n      ...searchStateC,\n      companyName: \"\",\n      suggestions: [] // Clear suggestions\n    });\n    setShowInputC(false); // Hiding input field\n    setShowSearchAgainButtonC(true); // Showing search again button\n    setAssetSymbolC(symbol ? symbol : \"\"); // Setting asset symbol\n  };\n  const handleSuggestionClickD = (name, symbol) => {\n    setSearchResultD([{\n      name,\n      symbol\n    }]);\n    setLastValidSearchResultD([{\n      name,\n      symbol\n    }]);\n    setSearchStateD({\n      ...searchStateD,\n      companyName: \"\",\n      suggestions: [] // Clear suggestions\n    });\n    setShowInputD(false); // Hiding input field\n    setShowSearchAgainButtonD(true); // Showing search again button\n    setAssetSymbolD(symbol ? symbol : \"\"); // Setting asset symbol\n  };\n  const calculateReturns = data => {\n    if (data.length < 2) return []; // Ensure there's enough data to compute returns\n\n    // Start mapping from the second element\n    const returns = data.slice(1).map((currentClose, index) => {\n      const previousClose = data[index]; // index is correct since we sliced the data\n      if (previousClose === 0) {\n        console.log(`Skipping index ${index + 1}: Previous close is zero`);\n        return undefined; // Or you could skip adding this return at all\n      }\n      const percentageChange = (currentClose - previousClose) / previousClose * 100;\n      return percentageChange;\n    });\n\n    // Optionally, filter out undefined entries if previous close was zero\n    return returns.filter(r => r !== undefined);\n  };\n  const calculateCovariance = (x, y) => {\n    const n = x.length;\n    const meanX = x.reduce((acc, curr) => acc + curr, 0) / n;\n    const meanY = y.reduce((acc, curr) => acc + curr, 0) / n;\n    return x.map((val, idx) => (val - meanX) * (y[idx] - meanY)).reduce((acc, curr) => acc + curr, 0) / (n - 1);\n  };\n  const calculateStandardDeviation = data => {\n    const n = data.length;\n    const mean = data.reduce((acc, curr) => acc + curr, 0) / n;\n    return Math.sqrt(data.map(x => Math.pow(x - mean, 2)).reduce((acc, curr) => acc + curr, 0) / (n - 1));\n  };\n  const calculateMeanReturn = returns => {\n    const sum = returns.reduce((acc, curr) => acc + curr, 0);\n    return sum / returns.length;\n  };\n  const calculateVolatility = (returns, meanReturn) => {\n    const variance = returns.reduce((acc, curr) => acc + Math.pow(curr - meanReturn, 2), 0) / (returns.length - 1);\n    return Math.sqrt(variance);\n  };\n  const calculateCorrelationMatrix = useCallback(allData => {\n    if (allData.length === 0) return [];\n    // Assuming allData is an array of arrays of returns\n    let matrix = new Array(allData.length).fill(0).map(() => new Array(allData.length).fill(0));\n    for (let i = 0; i < allData.length; i++) {\n      for (let j = i; j < allData.length; j++) {\n        if (i === j) {\n          matrix[i][j] = 1;\n        } else {\n          const covariance = calculateCovariance(allData[i], allData[j]);\n          const stdI = calculateStandardDeviation(allData[i]);\n          const stdJ = calculateStandardDeviation(allData[j]);\n          matrix[i][j] = matrix[j][i] = covariance / (stdI * stdJ);\n        }\n      }\n    }\n    return matrix;\n  }, []);\n  useEffect(() => {\n    const fetchAndProcessData = async () => {\n      const symbols = [assetSymbolA, assetSymbolB, assetSymbolC, assetSymbolD];\n      const setters = [setFilteredDataA, setFilteredDataB, setFilteredDataC, setFilteredDataD];\n      const fetchInterval = interval === \"Daily\" ? \"4hour\" : interval;\n      const dataPromises = symbols.map((symbol, index) => {\n        if (!symbol) {\n          setters[index]([]); // Set empty data if symbol is not provided\n          return Promise.resolve([]);\n        }\n        return fetch(`https://financialmodelingprep.com/api/v3/historical-chart/${fetchInterval}/${symbol}?from=${startDate}&to=${endDate}&apikey=${apiKey}`).then(response => response.json()).then(data => {\n          if (interval === \"Daily\") {\n            const groupedByDate = data.reduce((acc, cur) => {\n              const date = new Date(cur.date).toISOString().split(\"T\")[0];\n              if (!acc[date]) acc[date] = [];\n              acc[date].push(cur.close);\n              return acc;\n            }, {});\n            data = Object.entries(groupedByDate).map(([date, values]) => {\n              const average = values.reduce((a, b) => a + b, 0) / values.length;\n              return {\n                date,\n                close: average\n              };\n            });\n          }\n          const returns = data ? calculateReturns(data.map(entry => entry.close)) : [];\n\n          // Filter out null or undefined returns\n          const validReturns = returns.filter(r => r !== null && r !== undefined);\n\n          // Set the specific state for each asset\n          setters[index](validReturns);\n          setHistoricalDates(data.map(entry => entry.date));\n          return validReturns;\n        });\n      });\n      const allData = await Promise.all(dataPromises);\n      const meanReturns = allData.map(r => calculateMeanReturn(r));\n      const volatilities = allData.map((r, index) => calculateVolatility(r, meanReturns[index]));\n      const correlationMatrix = calculateCorrelationMatrix(allData);\n\n      // Set state for global calculations\n      setAssetsReturn(meanReturns);\n      setAssetsVol(volatilities);\n      setAssetsCorrelationMatrix(correlationMatrix);\n    };\n    if (assetSymbolA && assetSymbolB && assetSymbolC && assetSymbolD && startDate && endDate && interval) {\n      fetchAndProcessData();\n    }\n  }, [assetSymbolA, assetSymbolB, assetSymbolC, assetSymbolD, startDate, endDate, interval, apiKey, calculateCorrelationMatrix]);\n\n  // Function to handle user logout\n  const handleLogout = async () => {\n    try {\n      await axios.get(\"http://localhost:3002/logout\", {\n        withCredentials: true\n      });\n      localStorage.removeItem(\"isLoggedIn\");\n      setIsLoggedIn(false);\n      console.log(\"User logged out successfully\");\n    } catch (error) {\n      console.error(\"Error logging out:\", error);\n    }\n  };\n  useEffect(() => {\n    console.log(\"Checking filtered data and historical dates:\", {\n      filteredDataA,\n      filteredDataB,\n      filteredDataC,\n      filteredDataD,\n      historicalDates\n    });\n    if (!filteredDataA || !filteredDataB || !filteredDataC || !filteredDataD) {\n      console.log(\"No data found\");\n      return; // Return if necessary data is missing\n    }\n    if (filteredDataA.length <= 0 && filteredDataB.length > 0 && filteredDataC.length > 0 && filteredDataD.length > 0 && historicalDates.length <= 0) {\n      setSearchWarningA(\"Search for a new asset. This one does not have enough data\");\n      console.log(\"0\");\n      setSearchResultA(null);\n      setShowSearchAgainButtonA(false);\n      setShowInputA(true);\n    }\n    if (filteredDataA.length <= 0 && filteredDataB.length <= 0 && filteredDataC.length > 0 && filteredDataD.length > 0 && historicalDates.length <= 0) {\n      console.log(\"1\");\n      setSearchWarningA(\"Search for a new asset. This one does not have enough data\");\n      setSearchWarningB(\"Search for a new asset. This one does not have enough data\");\n      setSearchResultA(null);\n      setShowSearchAgainButtonA(false);\n      setShowInputA(true);\n      setSearchResultB(null);\n      setShowSearchAgainButtonB(false);\n      setShowInputB(true);\n    }\n    if (filteredDataA.length <= 0 && filteredDataB.length > 0 && filteredDataC.length <= 0 && filteredDataD.length > 0 && historicalDates.length <= 0) {\n      console.log(\"2\");\n      setSearchWarningA(\"Search for a new asset. This one does not have enough data\");\n      setSearchWarningC(\"Search for a new asset. This one does not have enough data\");\n      setSearchResultA(null);\n      setShowSearchAgainButtonA(false);\n      setShowInputA(true);\n      setSearchResultC(null);\n      setShowSearchAgainButtonC(false);\n      setShowInputC(true);\n    }\n    if (filteredDataA.length <= 0 && filteredDataB.length > 0 && filteredDataC.length > 0 && filteredDataD.length <= 0 && historicalDates.length <= 0) {\n      console.log(\"3\");\n      setSearchWarningA(\"Search for a new asset. This one does not have enough data\");\n      setSearchWarningD(\"Search for a new asset. This one does not have enough data\");\n      setSearchResultA(null);\n      setShowSearchAgainButtonA(false);\n      setShowInputA(true);\n      setSearchResultD(null);\n      setShowSearchAgainButtonD(false);\n      setShowInputD(true);\n    }\n    if (filteredDataA.length <= 0 && filteredDataB.length <= 0 && filteredDataC.length <= 0 && filteredDataD.length > 0 && historicalDates.length <= 0) {\n      console.log(\"4\");\n      setSearchWarningA(\"Search for a new asset. This one does not have enough data\");\n      setSearchWarningB(\"Search for a new asset. This one does not have enough data\");\n      setSearchWarningC(\"Search for a new asset. This one does not have enough data\");\n      setSearchResultA(null);\n      setShowSearchAgainButtonA(false);\n      setShowInputA(true);\n      setSearchResultB(null);\n      setShowSearchAgainButtonB(false);\n      setShowInputB(true);\n      setSearchResultC(null);\n      setShowSearchAgainButtonC(false);\n      setShowInputC(true);\n    }\n    if (filteredDataA.length <= 0 && filteredDataB.length <= 0 && filteredDataC.length > 0 && filteredDataD.length <= 0 && historicalDates.length <= 0) {\n      console.log(\"5\");\n      setSearchWarningA(\"Search for a new asset. This one does not have enough data\");\n      setSearchWarningB(\"Search for a new asset. This one does not have enough data\");\n      setSearchWarningD(\"Search for a new asset. This one does not have enough data\");\n      setSearchResultA(null);\n      setShowSearchAgainButtonA(false);\n      setShowInputA(true);\n      setSearchResultB(null);\n      setShowSearchAgainButtonB(false);\n      setShowInputB(true);\n      setSearchResultD(null);\n      setShowSearchAgainButtonD(false);\n      setShowInputD(true);\n    }\n    if (filteredDataA.length <= 0 && filteredDataB.length > 0 && filteredDataC.length <= 0 && filteredDataD.length <= 0 && historicalDates.length <= 0) {\n      console.log(\"6\");\n      setSearchWarningA(\"Search for a new asset. This one does not have enough data\");\n      setSearchWarningC(\"Search for a new asset. This one does not have enough data\");\n      setSearchWarningD(\"Search for a new asset. This one does not have enough data\");\n      setSearchResultA(null);\n      setShowSearchAgainButtonA(false);\n      setShowInputA(true);\n      setSearchResultC(null);\n      setShowSearchAgainButtonC(false);\n      setShowInputC(true);\n      setSearchResultD(null);\n      setShowSearchAgainButtonD(false);\n      setShowInputD(true);\n    }\n    if (filteredDataA.length > 0 && filteredDataB.length <= 0 && filteredDataC.length > 0 && filteredDataD.length > 0 && historicalDates.length <= 0) {\n      console.log(\"7\");\n      setSearchWarningB(\"Search for a new asset. This one does not have enough data\");\n      setSearchResultB(null);\n      setShowSearchAgainButtonB(false);\n      setShowInputB(true);\n    }\n    if (filteredDataA.length > 0 && filteredDataB.length <= 0 && filteredDataC.length <= 0 && filteredDataD.length > 0 && historicalDates.length < 0) {\n      console.log(\"8\");\n      setSearchWarningB(\"Search for a new asset. This one does not have enough data\");\n      setSearchWarningC(\"Search for a new asset. This one does not have enough data\");\n      setSearchResultB(null);\n      setShowSearchAgainButtonB(false);\n      setShowInputB(true);\n      setSearchResultC(null);\n      setShowSearchAgainButtonC(false);\n      setShowInputC(true);\n    }\n    if (filteredDataA.length > 0 && filteredDataB.length <= 0 && filteredDataC.length <= 0 && filteredDataD.length <= 0 && historicalDates.length <= 0) {\n      console.log(\"9\");\n      setSearchWarningB(\"Search for a new asset. This one does not have enough data\");\n      setSearchWarningC(\"Search for a new asset. This one does not have enough data\");\n      setSearchWarningD(\"Search for a new asset. This one does not have enough data\");\n      setSearchResultB(null);\n      setShowSearchAgainButtonB(false);\n      setShowInputB(true);\n      setSearchResultC(null);\n      setShowSearchAgainButtonC(false);\n      setShowInputC(true);\n      setSearchResultD(null);\n      setShowSearchAgainButtonD(false);\n      setShowInputD(true);\n    }\n    if (filteredDataA.length > 0 && filteredDataB.length > 0 && filteredDataC.length <= 0 && filteredDataD.length > 0 && historicalDates.length <= 0) {\n      console.log(\"10\");\n      setSearchWarningC(\"Search for a new asset. This one does not have enough data\");\n      setSearchResultC(null);\n      setShowSearchAgainButtonC(false);\n      setShowInputC(true);\n    }\n    if (filteredDataA.length > 0 && filteredDataB.length > 0 && filteredDataC.length <= 0 && filteredDataD.length <= 0 && historicalDates.length <= 0) {\n      console.log(\"11\");\n      setSearchWarningC(\"Search for a new asset. This one does not have enough data\");\n      setSearchWarningD(\"Search for a new asset. This one does not have enough data\");\n      setSearchResultC(null);\n      setShowSearchAgainButtonC(false);\n      setShowInputC(true);\n      setSearchResultD(null);\n      setShowSearchAgainButtonD(false);\n      setShowInputD(true);\n    }\n    if (filteredDataA.length > 0 && filteredDataB.length <= 0 && filteredDataC.length > 0 && filteredDataD.length <= 0 && historicalDates.length <= 0) {\n      console.log(\"12\");\n      setSearchWarningB(\"Search for a new asset. This one does not have enough data\");\n      setSearchWarningD(\"Search for a new asset. This one does not have enough data\");\n      setSearchResultB(null);\n      setShowSearchAgainButtonB(false);\n      setShowInputB(true);\n      setSearchResultD(null);\n      setShowSearchAgainButtonD(false);\n      setShowInputD(true);\n    }\n    if (filteredDataA.length > 0 && filteredDataB.length > 0 && filteredDataC.length > 0 && filteredDataD.length <= 0 && historicalDates.length <= 0) {\n      console.log(\"13\");\n      setSearchWarningD(\"Search for a new asset. This one does not have enough data\");\n      setSearchResultD(null);\n      setShowSearchAgainButtonD(false);\n      setShowInputD(true);\n    }\n    if (filteredDataA.length > 0 && filteredDataB.length > 0 && filteredDataC.length > 0 && filteredDataD.length > 0) {\n      setButtonNextDisabled(false);\n      setSearchResultA(lastValidSearchResultA);\n      setSearchResultB(lastValidSearchResultB);\n      setSearchResultC(lastValidSearchResultC);\n      setSearchResultD(lastValidSearchResultD);\n      setShowSearchAgainButtonA(true);\n      setShowInputA(false);\n      setShowSearchAgainButtonB(true);\n      setShowInputB(false);\n      setShowSearchAgainButtonC(true);\n      setShowInputC(false);\n      setShowSearchAgainButtonD(true);\n      setShowInputD(false);\n    }\n    setLineChartData({\n      labels: historicalDates,\n      datasets: [{\n        label: assetSymbolA,\n        data: filteredDataA,\n        fill: false,\n        borderColor: \"green\",\n        tension: 0.1\n      }, {\n        label: assetSymbolB,\n        data: filteredDataB,\n        fill: false,\n        borderColor: \"blue\",\n        tension: 0.1\n      }, {\n        label: assetSymbolC,\n        data: filteredDataC,\n        fill: false,\n        borderColor: \"pink\",\n        tension: 0.1\n      }, {\n        label: assetSymbolD,\n        data: filteredDataD,\n        fill: false,\n        borderColor: \"purple\",\n        tension: 0.1\n      }]\n    });\n  }, [filteredDataA, filteredDataB, filteredDataC, filteredDataD, assetSymbolA, assetSymbolB, assetSymbolC, assetSymbolD, historicalDates, lastValidSearchResultA, lastValidSearchResultB, lastValidSearchResultC, lastValidSearchResultD]);\n  const options = {\n    plugins: {\n      legend: {\n        position: \"bottom\"\n      },\n      tooltip: {\n        callbacks: {\n          label: context => {\n            let label = context.dataset.label || \"\";\n            if (label) {\n              label += \": \";\n            }\n            if (context.parsed.y !== null) {\n              label += context.parsed.y.toFixed(2) + \"%\";\n            }\n            return label;\n          }\n        }\n      }\n    },\n    scales: {\n      y: {\n        ticks: {\n          callback: function (value) {\n            return value.toString() + \"%\";\n          }\n        }\n      }\n    }\n  };\n  const handleClearButtonClick = () => {\n    // Reset relevant states\n    setSearchStateA({\n      companyName: \"\",\n      hasSearched: false,\n      suggestions: []\n    });\n    setSearchStateB({\n      companyName: \"\",\n      hasSearched: false,\n      suggestions: []\n    });\n    setSearchStateC({\n      companyName: \"\",\n      hasSearched: false,\n      suggestions: []\n    });\n    setSearchStateD({\n      companyName: \"\",\n      hasSearched: false,\n      suggestions: []\n    });\n    setSearchResultA(null);\n    setSearchResultB(null);\n    setSearchResultC(null);\n    setSearchResultD(null);\n    setSearchWarningA(\"Please search for an asset\");\n    setSearchWarningB(\"Please search for an asset\");\n    setSearchWarningC(\"Please search for an asset\");\n    setSearchWarningD(\"Please search for an asset\");\n    setShowInputA(true);\n    setShowInputB(true);\n    setShowInputC(true);\n    setShowInputD(true);\n    setShowSearchAgainButtonA(false);\n    setShowSearchAgainButtonB(false);\n    setShowSearchAgainButtonC(false);\n    setShowSearchAgainButtonD(false);\n    setStartDate(\"\");\n    setEndDate(\"\");\n    setAssetSymbolA(\"\");\n    setAssetSymbolB(\"\");\n    setAssetSymbolC(\"\");\n    setAssetSymbolD(\"\");\n    setLineChartData({});\n    setFilteredDataA([]);\n    setFilteredDataB([]);\n    setFilteredDataC([]);\n    setFilteredDataD([]);\n    setButtonNextDisabled(true);\n  };\n  const handleNextButtonClick = async () => {\n    if (showNext === true) {\n      setShowNext(false);\n      setClickedInfos([]);\n      console.log(false);\n    } else if (showNext === false) {\n      setShowNext(true);\n      console.log(true);\n    }\n  };\n  useEffect(() => {\n    // Check if risk-free rate is cached in session storage\n    const cachedRate = sessionStorage.getItem(\"riskFreeRate\");\n    if (cachedRate) {\n      // If cached rate exists, set it as the risk-free rate\n      setRiskFreeRate(parseFloat(cachedRate));\n    } else {\n      // If cached rate doesn't exist, fetch the first risk-free rate data point\n      async function fetchRiskFreeRate() {\n        // Define API key and URL for fetching risk-free rate data\n        const apiKey = \"M4H1P0NX0B015FR8\";\n        const url = `https://www.alphavantage.co/query?function=TREASURY_YIELD&interval=monthly&maturity=3month&apikey=${apiKey}`;\n        try {\n          // Fetch data from the API\n          const response = await fetch(url);\n          const data = await response.json();\n\n          // Check if the response contains valid data\n          if (data[\"data\"] && data[\"data\"].length > 0) {\n            // Extract the first risk-free rate from the response data\n            const firstRate = parseFloat(data[\"data\"][0][\"value\"]);\n\n            // Cache the first risk-free rate in session storage\n            sessionStorage.setItem(\"riskFreeRate\", firstRate);\n\n            // Set the first risk-free rate as the state variable\n            setRiskFreeRate(firstRate);\n\n            // Log the response data and the first rate for debugging\n            console.log(data, firstRate);\n          } else {\n            // Log an error if the API response format is unexpected\n            console.error(\"Unexpected API response format:\", data);\n          }\n        } catch (error) {\n          // Log an error if there's an issue fetching the risk-free rate\n          console.error(\"Error fetching risk-free rate:\", error);\n        }\n      }\n\n      // Call the fetchRiskFreeRate function to fetch the first risk-free rate data point\n      fetchRiskFreeRate();\n    }\n  }, []);\n  const calculatePortfolioMetrics = useCallback(weights => {\n    const portfolioReturn = weights.reduce((acc, weight, index) => acc + weight * assetsReturn[index], 0);\n    let portfolioVolatility = 0;\n    for (let i = 0; i < weights.length; i++) {\n      for (let j = 0; j < weights.length; j++) {\n        portfolioVolatility += weights[i] * weights[j] * assetsVol[i] * assetsVol[j] * assetsCorrelationMatrix[i][j];\n      }\n    }\n    const portfolioVolatilitySqrt = Math.sqrt(portfolioVolatility);\n    const sharpeRatio = (portfolioReturn - riskFreeRate) / portfolioVolatilitySqrt;\n    return {\n      return: portfolioReturn,\n      volatility: portfolioVolatilitySqrt,\n      sharpeRatio\n    };\n  }, [assetsReturn, assetsVol, assetsCorrelationMatrix, riskFreeRate]);\n  const optimizePortfolio = useCallback((initialWeights, targetReturn) => {\n    const tolerance = 0.00001;\n    let currentWeights = initialWeights.slice();\n    let learningRate = 0.001;\n    let iteration = 0;\n    const maxIterations = 1000;\n    const calculateReturn = weights => {\n      return weights.reduce((acc, weight, index) => acc + weight * assetsReturn[index], 0);\n    };\n    const calculateVariance = weights => {\n      let variance = 0;\n      for (let i = 0; i < weights.length; i++) {\n        for (let j = 0; j < weights.length; j++) {\n          variance += weights[i] * weights[j] * assetsVol[i] * assetsVol[j] * assetsCorrelationMatrix[i][j];\n        }\n      }\n      return variance;\n    };\n    const objectiveFunction = weights => {\n      const portReturn = calculateReturn(weights);\n      const portVariance = calculateVariance(weights);\n      const penalty = 100 * Math.pow(portReturn - targetReturn, 2);\n      return portVariance + penalty;\n    };\n    const calculateGradient = weights => {\n      const gradient = Array(weights.length).fill(0);\n      const delta = 0.00001;\n      for (let index = 0; index < weights.length; index++) {\n        const weightPlus = weights.slice();\n        weightPlus[index] += delta;\n        const objectivePlus = objectiveFunction(weightPlus);\n        const objectiveCurrent = objectiveFunction(weights);\n        gradient[index] = (objectivePlus - objectiveCurrent) / delta;\n      }\n      return gradient;\n    };\n    const updateWeights = (weights, gradients) => {\n      const newWeights = weights.map((weight, index) => weight - learningRate * gradients[index]);\n      const totalWeight = newWeights.reduce((a, b) => a + b, 0);\n      return newWeights.map(weight => weight / totalWeight);\n    };\n    while (iteration < maxIterations) {\n      const gradients = calculateGradient(currentWeights);\n      const updatedWeights = updateWeights(currentWeights, gradients);\n      const change = currentWeights.reduce((acc, weight, i) => acc + Math.abs(weight - updatedWeights[i]), 0);\n      currentWeights = updatedWeights;\n      if (change < tolerance) {\n        break;\n      }\n      iteration++;\n      // Decay learning rate\n      learningRate *= 0.99;\n    }\n    return currentWeights;\n  }, [assetsReturn, assetsVol, assetsCorrelationMatrix]);\n  const findEfficientFrontier = useCallback(() => {\n    const validAssetsReturn = assetsReturn.filter(assetReturn => assetReturn !== null && assetReturn !== undefined);\n    if (validAssetsReturn.length === 0) {\n      return {\n        portfolios: [],\n        volatilities: []\n      };\n    }\n\n    // Define minimum and maximum returns\n    const minReturn = Math.min(...validAssetsReturn);\n    const maxReturn = Math.max(...validAssetsReturn);\n\n    // Generate 100 target returns evenly distributed between min and max returns\n    const targetReturns = Array.from({\n      length: 100\n    }, (_, i) => minReturn + (maxReturn - minReturn) * (i / 99));\n    const portfolios = targetReturns.map(targetReturn => {\n      const initialWeights = Array.from({\n        length: validAssetsReturn.length\n      }, () => 1 / validAssetsReturn.length);\n      const optimizedWeights = optimizePortfolio(initialWeights, targetReturn);\n      return calculatePortfolioMetrics(optimizedWeights);\n    });\n\n    // Extract volatilities (standard deviation) of the portfolios\n    const volatilities = portfolios.map(portfolio => portfolio.standardDeviation);\n    return {\n      portfolios,\n      volatilities\n    };\n  }, [assetsReturn, optimizePortfolio, calculatePortfolioMetrics]);\n  const generateRandomPortfolios = useCallback(() => {\n    // Obtain the efficient frontier portfolios and volatilities\n    const {\n      volatilities\n    } = findEfficientFrontier();\n    if (volatilities.length === 0) {\n      return [];\n    }\n\n    // Calculate average volatility or use another metric\n    const averageVolatility = volatilities.reduce((a, b) => a + b, 0) / volatilities.length;\n\n    // Set default exponents to avoid issues\n    const exponentHigh = Math.min(1, averageVolatility / 10) || 1;\n    const exponentLow = Math.min(1, averageVolatility / 100) || 1;\n    const numPortfolios = 500;\n    return Array.from({\n      length: numPortfolios\n    }, () => {\n      // Generate weights with more variability\n      const rawWeights = Array.from({\n        length: assetsReturn.length\n      }, () => {\n        const randomValue = Math.random();\n        const exponent = randomValue > 0.5 ? exponentHigh : exponentLow;\n        return Math.pow(randomValue, exponent);\n      });\n      const totalWeight = rawWeights.reduce((acc, curr) => acc + curr, 0);\n      if (totalWeight === 0 || isNaN(totalWeight)) {\n        console.error(\"Invalid total weight:\", totalWeight);\n        return {\n          return: NaN,\n          volatility: NaN,\n          sharpeRatio: NaN\n        };\n      }\n      const normalizedWeights = rawWeights.map(weight => weight / totalWeight);\n      return calculatePortfolioMetrics(normalizedWeights);\n    });\n  }, [assetsReturn, findEfficientFrontier, calculatePortfolioMetrics]);\n  useEffect(() => {\n    if (riskFreeRate !== null) {\n      setMonteCarloPortfolios(generateRandomPortfolios());\n      setEfficientFrontierData(findEfficientFrontier());\n    }\n  }, [riskFreeRate, generateRandomPortfolios, findEfficientFrontier]);\n  const calculateBestOutcome = useCallback(percentile => {\n    const sortedReturns = monteCarloPortfolios.map(p => p.return).sort((a, b) => a - b);\n    const index = Math.ceil(percentile * sortedReturns.length) - 1;\n    return sortedReturns[index];\n  }, [monteCarloPortfolios]);\n  useEffect(() => {\n    const isEfficientFrontierArray = Array.isArray(efficientFrontierData.portfolios);\n    if (chartContainerRef.current && showNext && isEfficientFrontierArray) {\n      const formattedEfficientFrontierData = efficientFrontierData.portfolios.map(portfolio => ({\n        x: portfolio.volatility,\n        y: portfolio.return\n      }));\n      const ctx = chartContainerRef.current.getContext(\"2d\");\n      if (chartInstanceRef.current) {\n        chartInstanceRef.current.destroy();\n      }\n      chartInstanceRef.current = new Chart(ctx, {\n        type: \"scatter\",\n        data: {\n          datasets: [{\n            label: \"Efficient Frontier\",\n            data: formattedEfficientFrontierData,\n            backgroundColor: \"transparent\",\n            borderColor: \"red\",\n            borderWidth: 2,\n            pointRadius: 0,\n            showLine: true,\n            fill: false\n          }, {\n            label: \"Random Portfolios\",\n            data: monteCarloPortfolios.map(portfolio => ({\n              x: portfolio.volatility,\n              y: portfolio.return\n            })),\n            backgroundColor: \"rgba(128, 128, 128, 0.5)\",\n            pointRadius: 3\n          }]\n        },\n        options: {\n          responsive: true,\n          plugins: {\n            tooltip: {\n              mode: \"point\",\n              intersect: false,\n              callbacks: {\n                label: function (context) {\n                  return `Return: ${context.parsed.y.toFixed(2)}%, Volatility: ${context.parsed.x.toFixed(2)}%`;\n                }\n              }\n            }\n          },\n          scales: {\n            x: {\n              title: {\n                display: true,\n                text: \"Volatility (Standard Deviation)\"\n              },\n              beginAtZero: false\n            },\n            y: {\n              title: {\n                display: true,\n                text: \"Expected Return\"\n              },\n              beginAtZero: false\n            }\n          },\n          onClick: (event, elements) => {\n            if (elements.length > 0) {\n              elements.forEach(element => {\n                const datasetIndex = element.datasetIndex;\n                const dataIndex = element.index;\n                let clickedPortfolio;\n                if (datasetIndex === 1) {\n                  // Random Portfolios dataset\n                  clickedPortfolio = monteCarloPortfolios[dataIndex];\n                } else if (datasetIndex === 0) {\n                  // Efficient Frontier dataset\n                  clickedPortfolio = efficientFrontierData.portfolios[dataIndex];\n                }\n                if (clickedPortfolio) {\n                  const bestOutcomeReturn = calculateBestOutcome(0.99);\n                  const clickedWeights = optimizePortfolio(Array.from({\n                    length: assetsReturn.length\n                  }, () => 1 / assetsReturn.length), clickedPortfolio.return).map(weight => (weight * 100).toFixed(2));\n                  const portfolioComponents = assetsReturn.map((assetReturn, index) => `Asset ${index + 1}: ${clickedWeights[index]}%`);\n                  const cardInfo = {\n                    return: clickedPortfolio.return.toFixed(2),\n                    volatility: clickedPortfolio.volatility.toFixed(2),\n                    bestOutcomeReturn: (bestOutcomeReturn * 100).toFixed(2),\n                    portfolioComponents\n                  };\n                  console.log(\"Clicked Portfolio Information\", cardInfo);\n                  setClickedInfos(prevInfos => [...prevInfos, cardInfo]);\n                }\n              });\n            }\n          }\n        }\n      });\n      return () => {\n        if (chartInstanceRef.current) {\n          chartInstanceRef.current.destroy();\n        }\n      };\n    }\n  }, [monteCarloPortfolios, efficientFrontierData, optimizePortfolio, assetsReturn, calculateBestOutcome, showNext]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-title\",\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        className: \"custom-link\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Placeholder\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1741,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1740,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1738,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-middle\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: !showNext ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"controls\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              ref: wrapperRefSelectAssets,\n              onClick: handleSelectAssetsClick,\n              children: \"Select assets\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1750,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              ref: wrapperRefStartDate,\n              onClick: handleStartDateClick,\n              children: \"Start date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1756,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              ref: wrapperRefEndDate,\n              onClick: handleEndDateClick,\n              children: \"End date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1762,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              ref: wrapperRefInterval,\n              onClick: handleIntervalClick,\n              children: \"Interval\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1765,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1748,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chart-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [showSelectAssets && /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: wrapperRefSelectAssets,\n                className: `select-assets-content ${showSelectAssets ? \"visible\" : \"\"}`,\n                children: [showInputA && /*#__PURE__*/_jsxDEV(\"div\", {\n                  ref: wrapperRefA,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: searchStateA.companyName,\n                    onChange: handleInputChangeA,\n                    placeholder: \"Enter company name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1781,\n                    columnNumber: 27\n                  }, this), searchStateA.suggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"suggestion-dropdown\",\n                    children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                      children: searchStateA.suggestions.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n                        onClick: () => handleSuggestionClickA(item.name, item.symbol),\n                        children: [item.name, \" (\", item.symbol, \")\"]\n                      }, item.symbol, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1792,\n                        columnNumber: 35\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1790,\n                      columnNumber: 31\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1789,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1780,\n                  columnNumber: 25\n                }, this), showSearchAgainButtonA && /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    setShowInputA(true);\n                    setShowSearchAgainButtonA(false);\n                    setSearchResultA(null);\n                    setSearchWarningA(\"Please search for an asset\");\n                  },\n                  children: \"Search Again\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1811,\n                  columnNumber: 25\n                }, this), searchResultA && searchResultA.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                    children: \"Search Results:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1825,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                    children: searchResultA.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: \"Name:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1829,\n                        columnNumber: 33\n                      }, this), \" \", item.name, /*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: \"Symbol:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1830,\n                        columnNumber: 33\n                      }, this), \" \", item.symbol]\n                    }, item.symbol, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1828,\n                      columnNumber: 31\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1826,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1824,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: searchWarningA\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1836,\n                  columnNumber: 25\n                }, this), showInputB && /*#__PURE__*/_jsxDEV(\"div\", {\n                  ref: wrapperRefB,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: searchStateB.companyName,\n                    onChange: handleInputChangeB,\n                    placeholder: \"Enter company name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1841,\n                    columnNumber: 27\n                  }, this), searchStateB.suggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"suggestion-dropdown\",\n                    children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                      children: searchStateB.suggestions.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n                        onClick: () => handleSuggestionClickB(item.name, item.symbol),\n                        children: [item.name, \" (\", item.symbol, \")\"]\n                      }, item.symbol, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1852,\n                        columnNumber: 35\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1850,\n                      columnNumber: 31\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1849,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1840,\n                  columnNumber: 25\n                }, this), showSearchAgainButtonB && /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    setShowInputB(true);\n                    setShowSearchAgainButtonB(false);\n                    setSearchResultB(null);\n                    setSearchWarningB(\"Please search for an asset\");\n                  },\n                  children: \"Search Again\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1871,\n                  columnNumber: 25\n                }, this), searchResultB && searchResultB.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                    children: \"Search Results:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1885,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                    children: searchResultB.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: \"Name:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1889,\n                        columnNumber: 33\n                      }, this), \" \", item.name, /*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: \"Symbol:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1890,\n                        columnNumber: 33\n                      }, this), \" \", item.symbol]\n                    }, item.symbol, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1888,\n                      columnNumber: 31\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1886,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1884,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: searchWarningB\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1896,\n                  columnNumber: 25\n                }, this), showInputC && /*#__PURE__*/_jsxDEV(\"div\", {\n                  ref: wrapperRefC,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: searchStateC.companyName,\n                    onChange: handleInputChangeC,\n                    placeholder: \"Enter company name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1901,\n                    columnNumber: 27\n                  }, this), searchStateC.suggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"suggestion-dropdown\",\n                    children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                      children: searchStateC.suggestions.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n                        onClick: () => handleSuggestionClickC(item.name, item.symbol),\n                        children: [item.name, \" (\", item.symbol, \")\"]\n                      }, item.symbol, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1912,\n                        columnNumber: 35\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1910,\n                      columnNumber: 31\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1909,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1900,\n                  columnNumber: 25\n                }, this), showSearchAgainButtonC && /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    setShowInputC(true);\n                    setShowSearchAgainButtonC(false);\n                    setSearchResultC(null);\n                    setSearchWarningC(\"Please search for an asset\");\n                  },\n                  children: \"Search Again\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1931,\n                  columnNumber: 25\n                }, this), searchResultC && searchResultC.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                    children: \"Search Results:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1945,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                    children: searchResultC.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: \"Name:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1949,\n                        columnNumber: 33\n                      }, this), \" \", item.name, /*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: \"Symbol:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1950,\n                        columnNumber: 33\n                      }, this), \" \", item.symbol]\n                    }, item.symbol, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1948,\n                      columnNumber: 31\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1946,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1944,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: searchWarningC\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1956,\n                  columnNumber: 25\n                }, this), showInputD && /*#__PURE__*/_jsxDEV(\"div\", {\n                  ref: wrapperRefD,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: searchStateD.companyName,\n                    onChange: handleInputChangeD,\n                    placeholder: \"Enter company name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1961,\n                    columnNumber: 27\n                  }, this), searchStateD.suggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"suggestion-dropdown\",\n                    children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                      children: searchStateD.suggestions.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n                        onClick: () => handleSuggestionClickD(item.name, item.symbol),\n                        children: [item.name, \" (\", item.symbol, \")\"]\n                      }, item.symbol, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1972,\n                        columnNumber: 35\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1970,\n                      columnNumber: 31\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1969,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1960,\n                  columnNumber: 25\n                }, this), showSearchAgainButtonD && /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    setShowInputD(true);\n                    setShowSearchAgainButtonD(false);\n                    setSearchResultD(null);\n                    setSearchWarningD(\"Please search for an asset\");\n                  },\n                  children: \"Search Again\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1991,\n                  columnNumber: 25\n                }, this), searchResultD && searchResultD.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                    children: \"Search Results:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2005,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                    children: searchResultD.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: \"Name:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2009,\n                        columnNumber: 33\n                      }, this), \" \", item.name, /*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: \"Symbol:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2010,\n                        columnNumber: 33\n                      }, this), \" \", item.symbol]\n                    }, item.symbol, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2008,\n                      columnNumber: 31\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2006,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2004,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: searchWarningD\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2016,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1772,\n                columnNumber: 21\n              }, this), showStartDate && /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: wrapperRefStartDate,\n                className: \"start-date-content visible\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Please select a start date for the portfolio\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2025,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"date\",\n                  value: startDate,\n                  onChange: e => setStartDate(e.target.value),\n                  max: getYesterday()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2026,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2021,\n                columnNumber: 21\n              }, this), showEndDate && /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: wrapperRefEndDate,\n                className: \"end-date-content visible\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Please select an end date for the portfolio\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2039,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"date\",\n                  value: endDate,\n                  onChange: e => setEndDate(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2040,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2035,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1770,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [showInterval && /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: wrapperRefInterval,\n                className: \"interval-content visible\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Please select an interval for the portfolio\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2054,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\" \", /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: interval,\n                    onChange: e => setInterval(e.target.value),\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Interval\",\n                      children: \"Interval\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2061,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"1m\",\n                      children: \"1 Minute\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2062,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"5m\",\n                      children: \"5 Minutes\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2063,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"15m\",\n                      children: \"15 Minutes\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2064,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"30m\",\n                      children: \"30 Minutes\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2065,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"1hour\",\n                      children: \"1 Hour\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2066,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"4hour\",\n                      children: \"4 Hour\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2067,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Daily\",\n                      children: \"Daily\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2068,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2057,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2055,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2050,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"return-chart\",\n                children: Object.keys(lineChartData).length > 0 && /*#__PURE__*/_jsxDEV(Line, {\n                  data: lineChartData,\n                  options: options\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2076,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2074,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"buttons-container\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleClearButtonClick,\n                  className: \"btn clear\",\n                  children: \"Clear\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2080,\n                  columnNumber: 21\n                }, this), buttonNextDisabled ? /*#__PURE__*/_jsxDEV(\"button\", {\n                  disabled: buttonNextDisabled,\n                  className: \"btn next\",\n                  children: \"Next\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2087,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleNextButtonClick,\n                  className: \"btn next\",\n                  children: \"Next\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2094,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2079,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2048,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1769,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1747,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"monte-carlo-chart\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chart-container-monte-carlo\",\n            children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n              ref: chartContainerRef,\n              width: \"400\",\n              height: \"400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2108,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"btn-back-container\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn back\",\n                onClick: handleNextButtonClick,\n                children: \"Back\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2114,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2113,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2107,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"clicked-info\",\n            children: clickedInfos.map((clickedInfo, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"clicked-info-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: [\"Portfolio \", index + 1]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2122,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Expected Return:\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"portfolio-component\",\n                  children: [clickedInfo.return, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2125,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2123,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Risk (CVaR 1%):\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"portfolio-component\",\n                  children: [clickedInfo.volatility, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2131,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2129,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Best Outcome (CVaR 99%):\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"portfolio-component\",\n                  children: [clickedInfo.bestOutcomeReturn, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2137,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2135,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"portfolio-components-wrapper\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Portfolio Components:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2142,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"portfolio-components\",\n                  children: clickedInfo.portfolioComponents.map((component, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"portfolio-component\",\n                    children: component\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2146,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2143,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2141,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"button-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn delete\",\n                  children: \"Delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2154,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn save\",\n                  children: \"Save\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2155,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn buy\",\n                  children: \"Buy\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2156,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2153,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2121,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2119,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2106,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1745,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1744,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"username\",\n        children: username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2167,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: portrait,\n        alt: \" \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2168,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2166,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"containers-left\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"first-container\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/dashboard\",\n          className: \"custom-link\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"first-container-text\",\n            children: \"Dashboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2175,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2174,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2173,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"second-container\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/dashboard/invest\",\n          className: \"custom-link\",\n          children: /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"second-container-text\",\n            style: {\n              backgroundColor: \"rgb(161, 161, 161)\"\n            },\n            children: \"Invest\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2182,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2181,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/dashboard/watchlist\",\n          className: \"custom-link\",\n          children: /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"second-container-text\",\n            children: \"Watchlist\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2190,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2189,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/dashboard/portfolios\",\n          className: \"custom-link\",\n          children: /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"second-container-text\",\n            children: \"Portfolios\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2193,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2192,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2179,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"third-container\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/dashboard/profile\",\n          className: \"custom-link\",\n          children: /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"third-container-text\",\n            children: \"Profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2199,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2198,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"third-container-text\",\n          onClick: toggleModal,\n          children: \"Log out\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2201,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2197,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-container\",\n        children: modal && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: toggleModal,\n            className: \"overlay\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2209,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Are you sure you want to log out?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2211,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/\",\n              className: \"custom-link\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"modal-yes-btn\",\n                onClick: handleLogout,\n                children: \"Yes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2213,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2212,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"modal-no-btn\",\n              onClick: toggleModal,\n              children: \"No\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2217,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2210,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2208,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2206,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2171,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1737,\n    columnNumber: 5\n  }, this);\n}\n\n// Function to handle saving data for a single asset portfolio\n// const handleSavedDataOneAsset = async () => {\n//   const firstAssetName =\n//     searchResultA.length > 0 ? searchResultA[0].name : \"\";\n//   const data = {\n//     assets: 1,\n//     firstAsset: firstAssetName,\n//   };\n//   setSavedData([data]);\n\n//   try {\n//     const response = await axios.post(\n//       \"http://localhost:3002/save-data-portfolio\",\n//       {\n//         username: username,\n//         savedData: savedData,\n//       }\n//     );\n//     if (response.status === 200) {\n//       console.log(\"Data saved successfully\");\n//     }\n//   } catch (error) {\n//     console.error(\"Error saving risk array:\", error.message);\n//   }\n// };\n\n// Function to handle saving data for a two asset portfolio\n// const handleSavedDataTwoAssets = async () => {\n//   const firstAssetName =\n//     searchResultA.length > 0 ? searchResultA[0].name : \"\";\n//   const secondAssetName =\n//     searchResultA.length > 0 ? searchResultB[0].name : \"\";\n//   const data = {\n//     assets: 2,\n//     firstAsset: firstAssetName,\n//     secondAsset: secondAssetName,\n//   };\n//   setSavedData([data]);\n\n//   try {\n//     const response = await axios.post(\n//       \"http://localhost:3002/save-data-portfolio\",\n//       {\n//         username: username,\n//         savedData: savedData,\n//       }\n//     );\n//     if (response.status === 200) {\n//       console.log(\"Data saved successfully\");\n//     }\n//   } catch (error) {\n//     console.error(\"Error saving risk array:\", error.message);\n//   }\n// };\n\n// Fetch search results for asset A\n// useEffect(() => {\n//   if (!searchStateA.hasSearched || !searchStateA.companyName) return; // Return if search not performed or company name empty\n\n//   fetch(searchApiUrl) // Fetching data from API\n//     .then((response) => {\n//       if (!response.ok) {\n//         throw new Error(`HTTP error! status: ${response.status}`); // Handling HTTP error\n//       }\n//       return response.json(); // Parsing response as JSON\n//     })\n//     .then((data) => {\n//       if (!data) {\n//         console.error(\"Error: Data is null\"); // Handling null data\n//         setSearchResultA(null); // Setting search result to null\n//         setSearchWarningB(\"No matching company found.\"); // Setting search warning\n//         return;\n//       }\n\n//       const foundItem = data.find((item) => {\n//         if (!item || !item.name) return false;\n//         return item.name\n//           .toLowerCase()\n//           .includes(searchStateA.companyName.toLowerCase()); // Checking for matching company name\n//       });\n\n//       setSearchResultA(foundItem ? [foundItem] : []); // Setting search result\n//       setAssetSymbolA(foundItem ? foundItem.symbol : \"\"); // Setting asset symbol\n//       setSearchStateA({\n//         ...searchStateA,\n//         hasSearched: false,\n//       }); // Resetting search state\n//       setSearchWarningA(\"\"); // Clearing search warning\n//     })\n//     .catch((error) => {\n//       console.error(\"Error fetching data:\", error); // Handling fetch error\n//       setSearchResultA(null); // Setting search result to null\n//     });\n// }, [searchApiUrl, searchStateA]); // Dependencies for useEffect hook\n\n// Fetch search results for asset B\n// useEffect(() => {\n//   if (!searchStateB.hasSearched || !searchStateB.companyName) return; // Return if search not performed or company name empty\n\n//   fetch(searchApiUrl) // Fetching data from API\n//     .then((response) => {\n//       if (!response.ok) {\n//         throw new Error(`HTTP error! status: ${response.status}`); // Handling HTTP error\n//       }\n//       return response.json(); // Parsing response as JSON\n//     })\n//     .then((data) => {\n//       if (!data) {\n//         console.error(\"Error: Data is null\"); // Handling null data\n//         setSearchResultB(null); // Setting search result to null\n//         setSearchWarningB(\"No matching company found.\"); // Setting search warning\n//         return;\n//       }\n\n//       const foundItem = data.find((item) => {\n//         if (!item || !item.name) return false;\n//         return item.name\n//           .toLowerCase()\n//           .includes(searchStateB.companyName.toLowerCase()); // Checking for matching company name\n//       });\n\n//       setSearchResultB(foundItem ? [foundItem] : []); // Setting search result\n//       setAssetSymbolB(foundItem ? foundItem.symbol : \"\"); // Setting asset symbol\n//       setSearchStateB({\n//         ...searchStateB,\n//         hasSearched: false,\n//       }); // Resetting search state\n//       setSearchWarningB(\"\"); // Clearing search warning\n//     })\n//     .catch((error) => {\n//       console.error(\"Error fetching data:\", error); // Handling fetch error\n//       setSearchResultA(null); // Setting search result to null\n//     });\n// }, [searchApiUrl, searchStateB]); // Dependencies for useEffect hook\n_s(DashboardInvest, \"8Nb0GEwKswWrR3KeivBxtmDJkrU=\", false, function () {\n  return [useNavigate];\n});\n_c = DashboardInvest;\nvar _c;\n$RefreshReg$(_c, \"DashboardInvest\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","portrait","axios","Link","useNavigate","Line","Chart","jsxDEV","_jsxDEV","DashboardInvest","_s","isLoggedIn","setIsLoggedIn","modal","setModal","username","setUsername","navigate","assetSymbolA","setAssetSymbolA","assetSymbolB","setAssetSymbolB","assetSymbolC","setAssetSymbolC","assetSymbolD","setAssetSymbolD","searchStateA","setSearchStateA","companyName","hasSearched","suggestions","searchStateB","setSearchStateB","searchStateC","setSearchStateC","searchStateD","setSearchStateD","searchResultA","setSearchResultA","searchResultB","setSearchResultB","searchResultC","setSearchResultC","searchResultD","setSearchResultD","searchWarningA","setSearchWarningA","searchWarningB","setSearchWarningB","searchWarningC","setSearchWarningC","searchWarningD","setSearchWarningD","showInputA","setShowInputA","showInputB","setShowInputB","showInputC","setShowInputC","showInputD","setShowInputD","showSearchAgainButtonA","setShowSearchAgainButtonA","showSearchAgainButtonB","setShowSearchAgainButtonB","showSearchAgainButtonC","setShowSearchAgainButtonC","showSearchAgainButtonD","setShowSearchAgainButtonD","getYesterday","today","Date","setDate","getDate","toISOString","split","startDate","setStartDate","endDate","setEndDate","interval","setInterval","lineChartData","setLineChartData","filteredDataA","setFilteredDataA","filteredDataB","setFilteredDataB","filteredDataC","setFilteredDataC","filteredDataD","setFilteredDataD","historicalDates","setHistoricalDates","buttonNextDisabled","setButtonNextDisabled","showSelectAssets","setShowSelectAssets","showStartDate","setShowStartDate","showEndDate","setShowEndDate","showInterval","setShowInterval","showNext","setShowNext","wrapperRefA","wrapperRefB","wrapperRefC","wrapperRefD","wrapperRefSelectAssets","wrapperRefStartDate","wrapperRefEndDate","wrapperRefInterval","chartContainerRef","chartInstanceRef","assetsReturn","setAssetsReturn","assetsVol","setAssetsVol","assetsCorrelationMatrix","setAssetsCorrelationMatrix","monteCarloPortfolios","setMonteCarloPortfolios","efficientFrontierData","setEfficientFrontierData","riskFreeRate","setRiskFreeRate","clickedInfos","setClickedInfos","lastValidSearchResultA","setLastValidSearchResultA","lastValidSearchResultB","setLastValidSearchResultB","lastValidSearchResultC","setLastValidSearchResultC","lastValidSearchResultD","setLastValidSearchResultD","apiKey","checkLoginStatus","response","get","withCredentials","valid","data","error","console","toggleModal","document","body","classList","add","remove","handleSelectAssetsClick","event","stopPropagation","prev","handleStartDateClick","handleEndDateClick","handleIntervalClick","handleClickOutside","current","contains","target","addEventListener","removeEventListener","prevState","handleInputChangeA","e","input","value","trim","fetch","then","ok","Error","status","json","profilePromises","map","item","symbol","profileData","profile","Promise","all","profiles","filteredSuggestions","filter","currency","name","catch","handleInputChangeB","handleInputChangeC","handleInputChangeD","handleSuggestionClickA","handleSuggestionClickB","handleSuggestionClickC","handleSuggestionClickD","calculateReturns","length","returns","slice","currentClose","index","previousClose","log","undefined","percentageChange","r","calculateCovariance","x","y","n","meanX","reduce","acc","curr","meanY","val","idx","calculateStandardDeviation","mean","Math","sqrt","pow","calculateMeanReturn","sum","calculateVolatility","meanReturn","variance","calculateCorrelationMatrix","allData","matrix","Array","fill","i","j","covariance","stdI","stdJ","fetchAndProcessData","symbols","setters","fetchInterval","dataPromises","resolve","groupedByDate","cur","date","push","close","Object","entries","values","average","a","b","entry","validReturns","meanReturns","volatilities","correlationMatrix","handleLogout","localStorage","removeItem","labels","datasets","label","borderColor","tension","options","plugins","legend","position","tooltip","callbacks","context","dataset","parsed","toFixed","scales","ticks","callback","toString","handleClearButtonClick","handleNextButtonClick","cachedRate","sessionStorage","getItem","parseFloat","fetchRiskFreeRate","url","firstRate","setItem","calculatePortfolioMetrics","weights","portfolioReturn","weight","portfolioVolatility","portfolioVolatilitySqrt","sharpeRatio","return","volatility","optimizePortfolio","initialWeights","targetReturn","tolerance","currentWeights","learningRate","iteration","maxIterations","calculateReturn","calculateVariance","objectiveFunction","portReturn","portVariance","penalty","calculateGradient","gradient","delta","weightPlus","objectivePlus","objectiveCurrent","updateWeights","gradients","newWeights","totalWeight","updatedWeights","change","abs","findEfficientFrontier","validAssetsReturn","assetReturn","portfolios","minReturn","min","maxReturn","max","targetReturns","from","_","optimizedWeights","portfolio","standardDeviation","generateRandomPortfolios","averageVolatility","exponentHigh","exponentLow","numPortfolios","rawWeights","randomValue","random","exponent","isNaN","NaN","normalizedWeights","calculateBestOutcome","percentile","sortedReturns","p","sort","ceil","isEfficientFrontierArray","isArray","formattedEfficientFrontierData","ctx","getContext","destroy","type","backgroundColor","borderWidth","pointRadius","showLine","responsive","mode","intersect","title","display","text","beginAtZero","onClick","elements","forEach","element","datasetIndex","dataIndex","clickedPortfolio","bestOutcomeReturn","clickedWeights","portfolioComponents","cardInfo","prevInfos","className","children","to","fileName","_jsxFileName","lineNumber","columnNumber","ref","onChange","placeholder","keys","disabled","width","height","clickedInfo","component","src","alt","style","_c","$RefreshReg$"],"sources":["C:/Users/Alex/Desktop/Licenta/Proiect/Placeholder/client/src/pages/Invest.js"],"sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from \"react\";\r\nimport portrait from \"../imgs/default-pp.jpg\";\r\nimport axios from \"axios\";\r\nimport \"../Dashboard.css\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport Chart from \"chart.js/auto\";\r\n\r\nexport default function DashboardInvest() {\r\n  const [isLoggedIn, setIsLoggedIn] = useState();\r\n  const [modal, setModal] = useState(false);\r\n  const [username, setUsername] = useState(\"\");\r\n  const navigate = useNavigate();\r\n  const [assetSymbolA, setAssetSymbolA] = useState(\"\");\r\n  const [assetSymbolB, setAssetSymbolB] = useState(\"\");\r\n  const [assetSymbolC, setAssetSymbolC] = useState(\"\");\r\n  const [assetSymbolD, setAssetSymbolD] = useState(\"\");\r\n  const [searchStateA, setSearchStateA] = useState({\r\n    companyName: \"\",\r\n    hasSearched: false,\r\n    suggestions: [],\r\n  });\r\n  const [searchStateB, setSearchStateB] = useState({\r\n    companyName: \"\",\r\n    hasSearched: false,\r\n    suggestions: [],\r\n  });\r\n  const [searchStateC, setSearchStateC] = useState({\r\n    companyName: \"\",\r\n    hasSearched: false,\r\n    suggestions: [],\r\n  });\r\n  const [searchStateD, setSearchStateD] = useState({\r\n    companyName: \"\",\r\n    hasSearched: false,\r\n    suggestions: [],\r\n  });\r\n  const [searchResultA, setSearchResultA] = useState(null);\r\n  const [searchResultB, setSearchResultB] = useState(null);\r\n  const [searchResultC, setSearchResultC] = useState(null);\r\n  const [searchResultD, setSearchResultD] = useState(null);\r\n  const [searchWarningA, setSearchWarningA] = useState(\r\n    \"Please search for an asset\"\r\n  );\r\n  const [searchWarningB, setSearchWarningB] = useState(\r\n    \"Please search for an asset\"\r\n  );\r\n  const [searchWarningC, setSearchWarningC] = useState(\r\n    \"Please search for an asset\"\r\n  );\r\n  const [searchWarningD, setSearchWarningD] = useState(\r\n    \"Please search for an asset\"\r\n  );\r\n  const [showInputA, setShowInputA] = useState(true);\r\n  const [showInputB, setShowInputB] = useState(true);\r\n  const [showInputC, setShowInputC] = useState(true);\r\n  const [showInputD, setShowInputD] = useState(true);\r\n  const [showSearchAgainButtonA, setShowSearchAgainButtonA] = useState(false);\r\n  const [showSearchAgainButtonB, setShowSearchAgainButtonB] = useState(false);\r\n  const [showSearchAgainButtonC, setShowSearchAgainButtonC] = useState(false);\r\n  const [showSearchAgainButtonD, setShowSearchAgainButtonD] = useState(false);\r\n  const getYesterday = () => {\r\n    const today = new Date();\r\n    today.setDate(today.getDate() - 1);\r\n    return today.toISOString().split(\"T\")[0];\r\n  };\r\n  const [startDate, setStartDate] = useState(\"\");\r\n  const [endDate, setEndDate] = useState(\"\");\r\n  const [interval, setInterval] = useState(\"\");\r\n  const [lineChartData, setLineChartData] = useState({});\r\n  const [filteredDataA, setFilteredDataA] = useState([]);\r\n  const [filteredDataB, setFilteredDataB] = useState([]);\r\n  const [filteredDataC, setFilteredDataC] = useState([]);\r\n  const [filteredDataD, setFilteredDataD] = useState([]);\r\n  const [historicalDates, setHistoricalDates] = useState([]);\r\n  const [buttonNextDisabled, setButtonNextDisabled] = useState(true);\r\n  const [showSelectAssets, setShowSelectAssets] = useState(false);\r\n  const [showStartDate, setShowStartDate] = useState(false);\r\n  const [showEndDate, setShowEndDate] = useState(false);\r\n  const [showInterval, setShowInterval] = useState(false);\r\n  const [showNext, setShowNext] = useState(false);\r\n  const wrapperRefA = useRef(null);\r\n  const wrapperRefB = useRef(null);\r\n  const wrapperRefC = useRef(null);\r\n  const wrapperRefD = useRef(null);\r\n  const wrapperRefSelectAssets = useRef(null);\r\n  const wrapperRefStartDate = useRef(null);\r\n  const wrapperRefEndDate = useRef(null);\r\n  const wrapperRefInterval = useRef(null);\r\n  const chartContainerRef = useRef(null);\r\n  const chartInstanceRef = useRef(null);\r\n\r\n  const [assetsReturn, setAssetsReturn] = useState([]);\r\n  const [assetsVol, setAssetsVol] = useState([]);\r\n  const [assetsCorrelationMatrix, setAssetsCorrelationMatrix] = useState([]);\r\n  const [monteCarloPortfolios, setMonteCarloPortfolios] = useState([]);\r\n  const [efficientFrontierData, setEfficientFrontierData] = useState([]);\r\n  const [riskFreeRate, setRiskFreeRate] = useState(null);\r\n  const [clickedInfos, setClickedInfos] = useState([]);\r\n  const [lastValidSearchResultA, setLastValidSearchResultA] = useState(null);\r\n  const [lastValidSearchResultB, setLastValidSearchResultB] = useState(null);\r\n  const [lastValidSearchResultC, setLastValidSearchResultC] = useState(null);\r\n  const [lastValidSearchResultD, setLastValidSearchResultD] = useState(null);\r\n\r\n  const apiKey = \"VHfZ1hD7PgRzcghHku0BmQ4ki5erDFjN\";\r\n\r\n  // Check user's login status\r\n  useEffect(() => {\r\n    const checkLoginStatus = async () => {\r\n      try {\r\n        const response = await axios.get(\"http://localhost:3002\", {\r\n          withCredentials: true, // Sending cookies with the request\r\n        });\r\n        const { valid, username } = response.data; // Destructuring response data\r\n        setIsLoggedIn(valid); // Setting login status\r\n        setUsername(username); // Setting username\r\n      } catch (error) {\r\n        console.error(\"Error checking login status:\", error); // Handling error\r\n      }\r\n    };\r\n\r\n    checkLoginStatus(); // Calling function to check login status\r\n  }, []);\r\n\r\n  // Redirect if not logged in\r\n  useEffect(() => {\r\n    if (isLoggedIn === false) {\r\n      navigate(\"/login\"); // Redirecting to login page\r\n    }\r\n  }, [isLoggedIn, navigate]);\r\n\r\n  // Function to toggle the Log out modal visibility\r\n  const toggleModal = () => {\r\n    setModal(!modal); // Toggling modal state\r\n  };\r\n\r\n  // Add/remove class for modal\r\n  useEffect(() => {\r\n    if (modal) {\r\n      document.body.classList.add(\"active-modal\"); // Adding class to body for active modal\r\n    } else {\r\n      document.body.classList.remove(\"active-modal\"); // Removing class from body\r\n    }\r\n  }, [modal]);\r\n\r\n  const handleSelectAssetsClick = (event) => {\r\n    event.stopPropagation();\r\n    setShowSelectAssets((prev) => !prev);\r\n  };\r\n\r\n  const handleStartDateClick = (event) => {\r\n    event.stopPropagation();\r\n    setShowStartDate((prev) => !prev);\r\n  };\r\n\r\n  const handleEndDateClick = (event) => {\r\n    event.stopPropagation();\r\n    setShowEndDate((prev) => !prev);\r\n  };\r\n\r\n  const handleIntervalClick = (event) => {\r\n    event.stopPropagation();\r\n    setShowInterval((prev) => !prev);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (\r\n        wrapperRefSelectAssets.current &&\r\n        !wrapperRefSelectAssets.current.contains(event.target)\r\n      ) {\r\n        setShowSelectAssets(false);\r\n      }\r\n    };\r\n\r\n    if (showSelectAssets) {\r\n      document.addEventListener(\"mousedown\", handleClickOutside);\r\n    } else {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, [showSelectAssets]);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (\r\n        wrapperRefStartDate.current &&\r\n        !wrapperRefStartDate.current.contains(event.target)\r\n      ) {\r\n        setShowStartDate(false);\r\n      }\r\n    };\r\n\r\n    if (showStartDate) {\r\n      document.addEventListener(\"mousedown\", handleClickOutside);\r\n    } else {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, [showStartDate]);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (\r\n        wrapperRefEndDate.current &&\r\n        !wrapperRefEndDate.current.contains(event.target)\r\n      ) {\r\n        setShowEndDate(false);\r\n      }\r\n    };\r\n\r\n    if (showEndDate) {\r\n      document.addEventListener(\"mousedown\", handleClickOutside);\r\n    } else {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, [showEndDate]);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (\r\n        wrapperRefInterval.current &&\r\n        !wrapperRefInterval.current.contains(event.target)\r\n      ) {\r\n        setShowInterval(false);\r\n      }\r\n    };\r\n\r\n    if (showInterval) {\r\n      document.addEventListener(\"mousedown\", handleClickOutside);\r\n    } else {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, [showInterval]);\r\n\r\n  useEffect(() => {\r\n    function handleClickOutside(event) {\r\n      if (wrapperRefA.current && !wrapperRefA.current.contains(event.target)) {\r\n        setSearchStateA((prevState) => ({ ...prevState, suggestions: [] }));\r\n        setSearchWarningA(\"Please search for an asset\");\r\n      }\r\n    }\r\n\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, [wrapperRefA]);\r\n\r\n  useEffect(() => {\r\n    function handleClickOutside(event) {\r\n      if (wrapperRefB.current && !wrapperRefB.current.contains(event.target)) {\r\n        setSearchStateB((prevState) => ({ ...prevState, suggestions: [] }));\r\n        setSearchWarningB(\"Please search for an asset\");\r\n      }\r\n    }\r\n\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, [wrapperRefB]);\r\n\r\n  useEffect(() => {\r\n    function handleClickOutside(event) {\r\n      if (wrapperRefC.current && !wrapperRefC.current.contains(event.target)) {\r\n        setSearchStateC((prevState) => ({ ...prevState, suggestions: [] }));\r\n        setSearchWarningC(\"Please search for an asset\");\r\n      }\r\n    }\r\n\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, [wrapperRefC]);\r\n\r\n  useEffect(() => {\r\n    function handleClickOutside(event) {\r\n      if (wrapperRefD.current && !wrapperRefD.current.contains(event.target)) {\r\n        setSearchStateD((prevState) => ({ ...prevState, suggestions: [] }));\r\n        setSearchWarningD(\"Please search for an asset\");\r\n      }\r\n    }\r\n\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, [wrapperRefD]);\r\n\r\n  // Handle input change for asset A\r\n  const handleInputChangeA = (e) => {\r\n    const input = e.target.value.trim(); // Trim input value\r\n    setSearchStateA((prevState) => ({\r\n      ...prevState,\r\n      companyName: input,\r\n    })); // Set company name in search state\r\n\r\n    if (!input) {\r\n      setSearchStateA((prevState) => ({\r\n        ...prevState,\r\n        suggestions: [],\r\n      })); // Clear suggestions if input is empty\r\n      return;\r\n    }\r\n\r\n    fetch(\r\n      `https://financialmodelingprep.com/api/v3/search?query=${input}&limit=5&apikey=${apiKey}`\r\n    ) // Fetch search suggestions\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`); // Handle HTTP error\r\n        }\r\n        return response.json(); // Parse response as JSON\r\n      })\r\n      .then((data) => {\r\n        if (!data) {\r\n          console.error(\"Error: Data is null\"); // Handle null data\r\n          setSearchStateA((prevState) => ({\r\n            ...prevState,\r\n            suggestions: [],\r\n          }));\r\n          setSearchResultA(null);\r\n          setSearchWarningA(\"No matching company found\"); // Clear suggestions\r\n          return;\r\n        }\r\n\r\n        const profilePromises = data.map((item) =>\r\n          fetch(\r\n            `https://financialmodelingprep.com/api/v3/profile/${item.symbol}?apikey=${apiKey}`\r\n          )\r\n            .then((response) => response.json())\r\n            .then((profileData) => ({\r\n              ...item,\r\n              profile: profileData[0],\r\n            }))\r\n        );\r\n\r\n        setSearchWarningA(\"\");\r\n\r\n        Promise.all(profilePromises)\r\n          .then((profiles) => {\r\n            const filteredSuggestions = profiles\r\n              .filter(\r\n                (profile) =>\r\n                  profile.profile && profile.profile.currency === \"USD\"\r\n              )\r\n              .map((profile) => ({\r\n                name: profile.name,\r\n                symbol: profile.symbol,\r\n              }));\r\n\r\n            setSearchStateA((prevState) => ({\r\n              ...prevState,\r\n              suggestions: filteredSuggestions,\r\n            })); // Set filtered suggestions\r\n          })\r\n          .catch((error) => {\r\n            console.error(\"Error fetching profiles:\", error); // Handle fetch error\r\n            setSearchStateA((prevState) => ({\r\n              ...prevState,\r\n              suggestions: [],\r\n            })); // Clear suggestions\r\n          });\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error fetching suggestions:\", error); // Handle fetch error\r\n        setSearchStateA((prevState) => ({\r\n          ...prevState,\r\n          suggestions: [],\r\n        })); // Clear suggestions\r\n      });\r\n  };\r\n\r\n  // Handle input change for asset B\r\n  const handleInputChangeB = (e) => {\r\n    const input = e.target.value.trim(); // Trim input value\r\n    setSearchStateB((prevState) => ({\r\n      ...prevState,\r\n      companyName: input,\r\n    })); // Set company name in search state\r\n\r\n    if (!input) {\r\n      setSearchStateB((prevState) => ({\r\n        ...prevState,\r\n        suggestions: [],\r\n      })); // Clear suggestions if input is empty\r\n      return;\r\n    }\r\n\r\n    fetch(\r\n      `https://financialmodelingprep.com/api/v3/search?query=${input}&limit=5&apikey=${apiKey}`\r\n    ) // Fetch search suggestions\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`); // Handle HTTP error\r\n        }\r\n        return response.json(); // Parse response as JSON\r\n      })\r\n      .then((data) => {\r\n        if (!data) {\r\n          console.error(\"Error: Data is null\"); // Handle null data\r\n          setSearchStateB((prevState) => ({\r\n            ...prevState,\r\n            suggestions: [],\r\n          })); // Clear suggestions\r\n          setSearchResultB(null);\r\n          setSearchWarningB(\"No matching company found\"); // Clear suggestions\r\n          return;\r\n        }\r\n        const profilePromises = data.map((item) =>\r\n          fetch(\r\n            `https://financialmodelingprep.com/api/v3/profile/${item.symbol}?apikey=${apiKey}`\r\n          )\r\n            .then((response) => response.json())\r\n            .then((profileData) => ({\r\n              ...item,\r\n              profile: profileData[0],\r\n            }))\r\n        );\r\n\r\n        setSearchWarningB(\"\");\r\n\r\n        Promise.all(profilePromises)\r\n          .then((profiles) => {\r\n            const filteredSuggestions = profiles\r\n              .filter(\r\n                (profile) =>\r\n                  profile.profile && profile.profile.currency === \"USD\"\r\n              )\r\n              .map((profile) => ({\r\n                name: profile.name,\r\n                symbol: profile.symbol,\r\n              }));\r\n\r\n            setSearchStateB((prevState) => ({\r\n              ...prevState,\r\n              suggestions: filteredSuggestions,\r\n            })); // Set filtered suggestions\r\n          })\r\n          .catch((error) => {\r\n            console.error(\"Error fetching profiles:\", error); // Handle fetch error\r\n            setSearchStateB((prevState) => ({\r\n              ...prevState,\r\n              suggestions: [],\r\n            })); // Clear suggestions\r\n          });\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error fetching suggestions:\", error); // Handle fetch error\r\n        setSearchStateB((prevState) => ({\r\n          ...prevState,\r\n          suggestions: [],\r\n        })); // Clear suggestions\r\n      });\r\n  };\r\n  const handleInputChangeC = (e) => {\r\n    const input = e.target.value.trim(); // Trim input value\r\n    setSearchStateC((prevState) => ({\r\n      ...prevState,\r\n      companyName: input,\r\n    })); // Set company name in search state\r\n\r\n    if (!input) {\r\n      setSearchStateC((prevState) => ({\r\n        ...prevState,\r\n        suggestions: [],\r\n      })); // Clear suggestions if input is empty\r\n      return;\r\n    }\r\n\r\n    fetch(\r\n      `https://financialmodelingprep.com/api/v3/search?query=${input}&limit=5&apikey=${apiKey}`\r\n    ) // Fetch search suggestions\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`); // Handle HTTP error\r\n        }\r\n        return response.json(); // Parse response as JSON\r\n      })\r\n      .then((data) => {\r\n        if (!data) {\r\n          console.error(\"Error: Data is null\"); // Handle null data\r\n          setSearchStateC((prevState) => ({\r\n            ...prevState,\r\n            suggestions: [],\r\n          }));\r\n          setSearchResultC(null);\r\n          setSearchWarningC(\"No matching company found\"); // Clear suggestions\r\n          return;\r\n        }\r\n\r\n        const profilePromises = data.map((item) =>\r\n          fetch(\r\n            `https://financialmodelingprep.com/api/v3/profile/${item.symbol}?apikey=${apiKey}`\r\n          )\r\n            .then((response) => response.json())\r\n            .then((profileData) => ({\r\n              ...item,\r\n              profile: profileData[0],\r\n            }))\r\n        );\r\n\r\n        setSearchWarningC(\"\");\r\n\r\n        Promise.all(profilePromises)\r\n          .then((profiles) => {\r\n            const filteredSuggestions = profiles\r\n              .filter(\r\n                (profile) =>\r\n                  profile.profile && profile.profile.currency === \"USD\"\r\n              )\r\n              .map((profile) => ({\r\n                name: profile.name,\r\n                symbol: profile.symbol,\r\n              }));\r\n\r\n            setSearchStateC((prevState) => ({\r\n              ...prevState,\r\n              suggestions: filteredSuggestions,\r\n            })); // Set filtered suggestions\r\n          })\r\n          .catch((error) => {\r\n            console.error(\"Error fetching profiles:\", error); // Handle fetch error\r\n            setSearchStateC((prevState) => ({\r\n              ...prevState,\r\n              suggestions: [],\r\n            })); // Clear suggestions\r\n          });\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error fetching suggestions:\", error); // Handle fetch error\r\n        setSearchStateC((prevState) => ({\r\n          ...prevState,\r\n          suggestions: [],\r\n        })); // Clear suggestions\r\n      });\r\n  };\r\n  const handleInputChangeD = (e) => {\r\n    const input = e.target.value.trim(); // Trim input value\r\n    setSearchStateD((prevState) => ({\r\n      ...prevState,\r\n      companyName: input,\r\n    })); // Set company name in search state\r\n\r\n    if (!input) {\r\n      setSearchStateD((prevState) => ({\r\n        ...prevState,\r\n        suggestions: [],\r\n      })); // Clear suggestions if input is empty\r\n      return;\r\n    }\r\n\r\n    fetch(\r\n      `https://financialmodelingprep.com/api/v3/search?query=${input}&limit=5&apikey=${apiKey}`\r\n    ) // Fetch search suggestions\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`); // Handle HTTP error\r\n        }\r\n        return response.json(); // Parse response as JSON\r\n      })\r\n      .then((data) => {\r\n        if (!data) {\r\n          console.error(\"Error: Data is null\"); // Handle null data\r\n          setSearchStateD((prevState) => ({\r\n            ...prevState,\r\n            suggestions: [],\r\n          }));\r\n          setSearchResultD(null);\r\n          setSearchWarningD(\"No matching company found\"); // Clear suggestions\r\n          return;\r\n        }\r\n\r\n        const profilePromises = data.map((item) =>\r\n          fetch(\r\n            `https://financialmodelingprep.com/api/v3/profile/${item.symbol}?apikey=${apiKey}`\r\n          )\r\n            .then((response) => response.json())\r\n            .then((profileData) => ({\r\n              ...item,\r\n              profile: profileData[0],\r\n            }))\r\n        );\r\n\r\n        setSearchWarningD(\"\");\r\n\r\n        Promise.all(profilePromises)\r\n          .then((profiles) => {\r\n            const filteredSuggestions = profiles\r\n              .filter(\r\n                (profile) =>\r\n                  profile.profile && profile.profile.currency === \"USD\"\r\n              )\r\n              .map((profile) => ({\r\n                name: profile.name,\r\n                symbol: profile.symbol,\r\n              }));\r\n\r\n            setSearchStateD((prevState) => ({\r\n              ...prevState,\r\n              suggestions: filteredSuggestions,\r\n            })); // Set filtered suggestions\r\n          })\r\n          .catch((error) => {\r\n            console.error(\"Error fetching profiles:\", error); // Handle fetch error\r\n            setSearchStateD((prevState) => ({\r\n              ...prevState,\r\n              suggestions: [],\r\n            })); // Clear suggestions\r\n          });\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error fetching suggestions:\", error); // Handle fetch error\r\n        setSearchStateD((prevState) => ({\r\n          ...prevState,\r\n          suggestions: [],\r\n        })); // Clear suggestions\r\n      });\r\n  };\r\n\r\n  // Function to handle click on a suggestion for asset A\r\n  const handleSuggestionClickA = (name, symbol) => {\r\n    setSearchResultA([{ name, symbol }]);\r\n    setLastValidSearchResultA([{ name, symbol }]);\r\n    setSearchStateA({\r\n      ...searchStateA,\r\n      companyName: \"\",\r\n      suggestions: [], // Clear suggestions\r\n    });\r\n    setShowInputA(false); // Hiding input field\r\n    setShowSearchAgainButtonA(true); // Showing search again button\r\n    setAssetSymbolA(symbol ? symbol : \"\"); // Setting asset symbol\r\n  };\r\n\r\n  // Function to handle click on a suggestion for asset B\r\n  const handleSuggestionClickB = (name, symbol) => {\r\n    setSearchResultB([{ name, symbol }]);\r\n    setLastValidSearchResultB([{ name, symbol }]);\r\n    setSearchStateB({\r\n      ...searchStateB,\r\n      companyName: \"\",\r\n      suggestions: [], // Clear suggestions\r\n    });\r\n    setShowInputB(false); // Hiding input field\r\n    setShowSearchAgainButtonB(true); // Showing search again button\r\n    setAssetSymbolB(symbol ? symbol : \"\"); // Setting asset symbol\r\n  };\r\n\r\n  const handleSuggestionClickC = (name, symbol) => {\r\n    setSearchResultC([{ name, symbol }]);\r\n    setLastValidSearchResultC([{ name, symbol }]);\r\n    setSearchStateC({\r\n      ...searchStateC,\r\n      companyName: \"\",\r\n      suggestions: [], // Clear suggestions\r\n    });\r\n    setShowInputC(false); // Hiding input field\r\n    setShowSearchAgainButtonC(true); // Showing search again button\r\n    setAssetSymbolC(symbol ? symbol : \"\"); // Setting asset symbol\r\n  };\r\n  const handleSuggestionClickD = (name, symbol) => {\r\n    setSearchResultD([{ name, symbol }]);\r\n    setLastValidSearchResultD([{ name, symbol }]);\r\n    setSearchStateD({\r\n      ...searchStateD,\r\n      companyName: \"\",\r\n      suggestions: [], // Clear suggestions\r\n    });\r\n    setShowInputD(false); // Hiding input field\r\n    setShowSearchAgainButtonD(true); // Showing search again button\r\n    setAssetSymbolD(symbol ? symbol : \"\"); // Setting asset symbol\r\n  };\r\n\r\n  const calculateReturns = (data) => {\r\n    if (data.length < 2) return []; // Ensure there's enough data to compute returns\r\n\r\n    // Start mapping from the second element\r\n    const returns = data.slice(1).map((currentClose, index) => {\r\n      const previousClose = data[index]; // index is correct since we sliced the data\r\n      if (previousClose === 0) {\r\n        console.log(`Skipping index ${index + 1}: Previous close is zero`);\r\n        return undefined; // Or you could skip adding this return at all\r\n      }\r\n      const percentageChange =\r\n        ((currentClose - previousClose) / previousClose) * 100;\r\n      return percentageChange;\r\n    });\r\n\r\n    // Optionally, filter out undefined entries if previous close was zero\r\n    return returns.filter((r) => r !== undefined);\r\n  };\r\n\r\n  const calculateCovariance = (x, y) => {\r\n    const n = x.length;\r\n    const meanX = x.reduce((acc, curr) => acc + curr, 0) / n;\r\n    const meanY = y.reduce((acc, curr) => acc + curr, 0) / n;\r\n\r\n    return (\r\n      x\r\n        .map((val, idx) => (val - meanX) * (y[idx] - meanY))\r\n        .reduce((acc, curr) => acc + curr, 0) /\r\n      (n - 1)\r\n    );\r\n  };\r\n\r\n  const calculateStandardDeviation = (data) => {\r\n    const n = data.length;\r\n    const mean = data.reduce((acc, curr) => acc + curr, 0) / n;\r\n    return Math.sqrt(\r\n      data\r\n        .map((x) => Math.pow(x - mean, 2))\r\n        .reduce((acc, curr) => acc + curr, 0) /\r\n        (n - 1)\r\n    );\r\n  };\r\n\r\n  const calculateMeanReturn = (returns) => {\r\n    const sum = returns.reduce((acc, curr) => acc + curr, 0);\r\n    return sum / returns.length;\r\n  };\r\n\r\n  const calculateVolatility = (returns, meanReturn) => {\r\n    const variance =\r\n      returns.reduce((acc, curr) => acc + Math.pow(curr - meanReturn, 2), 0) /\r\n      (returns.length - 1);\r\n    return Math.sqrt(variance);\r\n  };\r\n\r\n  const calculateCorrelationMatrix = useCallback((allData) => {\r\n    if (allData.length === 0) return [];\r\n    // Assuming allData is an array of arrays of returns\r\n    let matrix = new Array(allData.length)\r\n      .fill(0)\r\n      .map(() => new Array(allData.length).fill(0));\r\n\r\n    for (let i = 0; i < allData.length; i++) {\r\n      for (let j = i; j < allData.length; j++) {\r\n        if (i === j) {\r\n          matrix[i][j] = 1;\r\n        } else {\r\n          const covariance = calculateCovariance(allData[i], allData[j]);\r\n          const stdI = calculateStandardDeviation(allData[i]);\r\n          const stdJ = calculateStandardDeviation(allData[j]);\r\n          matrix[i][j] = matrix[j][i] = covariance / (stdI * stdJ);\r\n        }\r\n      }\r\n    }\r\n\r\n    return matrix;\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchAndProcessData = async () => {\r\n      const symbols = [assetSymbolA, assetSymbolB, assetSymbolC, assetSymbolD];\r\n      const setters = [\r\n        setFilteredDataA,\r\n        setFilteredDataB,\r\n        setFilteredDataC,\r\n        setFilteredDataD,\r\n      ];\r\n\r\n      const fetchInterval = interval === \"Daily\" ? \"4hour\" : interval;\r\n\r\n      const dataPromises = symbols.map((symbol, index) => {\r\n        if (!symbol) {\r\n          setters[index]([]); // Set empty data if symbol is not provided\r\n          return Promise.resolve([]);\r\n        }\r\n        return fetch(\r\n          `https://financialmodelingprep.com/api/v3/historical-chart/${fetchInterval}/${symbol}?from=${startDate}&to=${endDate}&apikey=${apiKey}`\r\n        )\r\n          .then((response) => response.json())\r\n          .then((data) => {\r\n            if (interval === \"Daily\") {\r\n              const groupedByDate = data.reduce((acc, cur) => {\r\n                const date = new Date(cur.date).toISOString().split(\"T\")[0];\r\n                if (!acc[date]) acc[date] = [];\r\n                acc[date].push(cur.close);\r\n                return acc;\r\n              }, {});\r\n\r\n              data = Object.entries(groupedByDate).map(([date, values]) => {\r\n                const average =\r\n                  values.reduce((a, b) => a + b, 0) / values.length;\r\n                return { date, close: average };\r\n              });\r\n            }\r\n\r\n            const returns = data\r\n              ? calculateReturns(data.map((entry) => entry.close))\r\n              : [];\r\n\r\n            // Filter out null or undefined returns\r\n            const validReturns = returns.filter(\r\n              (r) => r !== null && r !== undefined\r\n            );\r\n\r\n            // Set the specific state for each asset\r\n            setters[index](validReturns);\r\n            setHistoricalDates(data.map((entry) => entry.date));\r\n            return validReturns;\r\n          });\r\n      });\r\n\r\n      const allData = await Promise.all(dataPromises);\r\n      const meanReturns = allData.map((r) => calculateMeanReturn(r));\r\n      const volatilities = allData.map((r, index) =>\r\n        calculateVolatility(r, meanReturns[index])\r\n      );\r\n      const correlationMatrix = calculateCorrelationMatrix(allData);\r\n\r\n      // Set state for global calculations\r\n      setAssetsReturn(meanReturns);\r\n      setAssetsVol(volatilities);\r\n      setAssetsCorrelationMatrix(correlationMatrix);\r\n    };\r\n\r\n    if (\r\n      assetSymbolA &&\r\n      assetSymbolB &&\r\n      assetSymbolC &&\r\n      assetSymbolD &&\r\n      startDate &&\r\n      endDate &&\r\n      interval\r\n    ) {\r\n      fetchAndProcessData();\r\n    }\r\n  }, [\r\n    assetSymbolA,\r\n    assetSymbolB,\r\n    assetSymbolC,\r\n    assetSymbolD,\r\n    startDate,\r\n    endDate,\r\n    interval,\r\n    apiKey,\r\n    calculateCorrelationMatrix,\r\n  ]);\r\n\r\n  // Function to handle user logout\r\n  const handleLogout = async () => {\r\n    try {\r\n      await axios.get(\"http://localhost:3002/logout\", {\r\n        withCredentials: true,\r\n      });\r\n      localStorage.removeItem(\"isLoggedIn\");\r\n      setIsLoggedIn(false);\r\n      console.log(\"User logged out successfully\");\r\n    } catch (error) {\r\n      console.error(\"Error logging out:\", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(\"Checking filtered data and historical dates:\", {\r\n      filteredDataA,\r\n      filteredDataB,\r\n      filteredDataC,\r\n      filteredDataD,\r\n      historicalDates,\r\n    });\r\n    if (!filteredDataA || !filteredDataB || !filteredDataC || !filteredDataD) {\r\n      console.log(\"No data found\");\r\n      return; // Return if necessary data is missing\r\n    }\r\n\r\n    if (\r\n      filteredDataA.length <= 0 &&\r\n      filteredDataB.length > 0 &&\r\n      filteredDataC.length > 0 &&\r\n      filteredDataD.length > 0 &&\r\n      historicalDates.length <= 0\r\n    ) {\r\n      setSearchWarningA(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      console.log(\"0\");\r\n      setSearchResultA(null);\r\n      setShowSearchAgainButtonA(false);\r\n      setShowInputA(true);\r\n    }\r\n    if (\r\n      filteredDataA.length <= 0 &&\r\n      filteredDataB.length <= 0 &&\r\n      filteredDataC.length > 0 &&\r\n      filteredDataD.length > 0 &&\r\n      historicalDates.length <= 0\r\n    ) {\r\n      console.log(\"1\");\r\n      setSearchWarningA(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchWarningB(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n\r\n      setSearchResultA(null);\r\n      setShowSearchAgainButtonA(false);\r\n      setShowInputA(true);\r\n      setSearchResultB(null);\r\n      setShowSearchAgainButtonB(false);\r\n      setShowInputB(true);\r\n    }\r\n    if (\r\n      filteredDataA.length <= 0 &&\r\n      filteredDataB.length > 0 &&\r\n      filteredDataC.length <= 0 &&\r\n      filteredDataD.length > 0 &&\r\n      historicalDates.length <= 0\r\n    ) {\r\n      console.log(\"2\");\r\n      setSearchWarningA(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchWarningC(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchResultA(null);\r\n      setShowSearchAgainButtonA(false);\r\n      setShowInputA(true);\r\n      setSearchResultC(null);\r\n      setShowSearchAgainButtonC(false);\r\n      setShowInputC(true);\r\n    }\r\n    if (\r\n      filteredDataA.length <= 0 &&\r\n      filteredDataB.length > 0 &&\r\n      filteredDataC.length > 0 &&\r\n      filteredDataD.length <= 0 &&\r\n      historicalDates.length <= 0\r\n    ) {\r\n      console.log(\"3\");\r\n      setSearchWarningA(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchWarningD(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchResultA(null);\r\n      setShowSearchAgainButtonA(false);\r\n      setShowInputA(true);\r\n      setSearchResultD(null);\r\n      setShowSearchAgainButtonD(false);\r\n      setShowInputD(true);\r\n    }\r\n    if (\r\n      filteredDataA.length <= 0 &&\r\n      filteredDataB.length <= 0 &&\r\n      filteredDataC.length <= 0 &&\r\n      filteredDataD.length > 0 &&\r\n      historicalDates.length <= 0\r\n    ) {\r\n      console.log(\"4\");\r\n      setSearchWarningA(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchWarningB(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchWarningC(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchResultA(null);\r\n      setShowSearchAgainButtonA(false);\r\n      setShowInputA(true);\r\n      setSearchResultB(null);\r\n      setShowSearchAgainButtonB(false);\r\n      setShowInputB(true);\r\n      setSearchResultC(null);\r\n      setShowSearchAgainButtonC(false);\r\n      setShowInputC(true);\r\n    }\r\n    if (\r\n      filteredDataA.length <= 0 &&\r\n      filteredDataB.length <= 0 &&\r\n      filteredDataC.length > 0 &&\r\n      filteredDataD.length <= 0 &&\r\n      historicalDates.length <= 0\r\n    ) {\r\n      console.log(\"5\");\r\n      setSearchWarningA(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchWarningB(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchWarningD(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchResultA(null);\r\n      setShowSearchAgainButtonA(false);\r\n      setShowInputA(true);\r\n      setSearchResultB(null);\r\n      setShowSearchAgainButtonB(false);\r\n      setShowInputB(true);\r\n      setSearchResultD(null);\r\n      setShowSearchAgainButtonD(false);\r\n      setShowInputD(true);\r\n    }\r\n    if (\r\n      filteredDataA.length <= 0 &&\r\n      filteredDataB.length > 0 &&\r\n      filteredDataC.length <= 0 &&\r\n      filteredDataD.length <= 0 &&\r\n      historicalDates.length <= 0\r\n    ) {\r\n      console.log(\"6\");\r\n      setSearchWarningA(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchWarningC(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchWarningD(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchResultA(null);\r\n      setShowSearchAgainButtonA(false);\r\n      setShowInputA(true);\r\n      setSearchResultC(null);\r\n      setShowSearchAgainButtonC(false);\r\n      setShowInputC(true);\r\n      setSearchResultD(null);\r\n      setShowSearchAgainButtonD(false);\r\n      setShowInputD(true);\r\n    }\r\n    if (\r\n      filteredDataA.length > 0 &&\r\n      filteredDataB.length <= 0 &&\r\n      filteredDataC.length > 0 &&\r\n      filteredDataD.length > 0 &&\r\n      historicalDates.length <= 0\r\n    ) {\r\n      console.log(\"7\");\r\n      setSearchWarningB(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchResultB(null);\r\n      setShowSearchAgainButtonB(false);\r\n      setShowInputB(true);\r\n    }\r\n    if (\r\n      filteredDataA.length > 0 &&\r\n      filteredDataB.length <= 0 &&\r\n      filteredDataC.length <= 0 &&\r\n      filteredDataD.length > 0 &&\r\n      historicalDates.length < 0\r\n    ) {\r\n      console.log(\"8\");\r\n      setSearchWarningB(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchWarningC(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchResultB(null);\r\n      setShowSearchAgainButtonB(false);\r\n      setShowInputB(true);\r\n      setSearchResultC(null);\r\n      setShowSearchAgainButtonC(false);\r\n      setShowInputC(true);\r\n    }\r\n    if (\r\n      filteredDataA.length > 0 &&\r\n      filteredDataB.length <= 0 &&\r\n      filteredDataC.length <= 0 &&\r\n      filteredDataD.length <= 0 &&\r\n      historicalDates.length <= 0\r\n    ) {\r\n      console.log(\"9\");\r\n      setSearchWarningB(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchWarningC(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchWarningD(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchResultB(null);\r\n      setShowSearchAgainButtonB(false);\r\n      setShowInputB(true);\r\n      setSearchResultC(null);\r\n      setShowSearchAgainButtonC(false);\r\n      setShowInputC(true);\r\n      setSearchResultD(null);\r\n      setShowSearchAgainButtonD(false);\r\n      setShowInputD(true);\r\n    }\r\n    if (\r\n      filteredDataA.length > 0 &&\r\n      filteredDataB.length > 0 &&\r\n      filteredDataC.length <= 0 &&\r\n      filteredDataD.length > 0 &&\r\n      historicalDates.length <= 0\r\n    ) {\r\n      console.log(\"10\");\r\n      setSearchWarningC(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchResultC(null);\r\n      setShowSearchAgainButtonC(false);\r\n      setShowInputC(true);\r\n    }\r\n    if (\r\n      filteredDataA.length > 0 &&\r\n      filteredDataB.length > 0 &&\r\n      filteredDataC.length <= 0 &&\r\n      filteredDataD.length <= 0 &&\r\n      historicalDates.length <= 0\r\n    ) {\r\n      console.log(\"11\");\r\n      setSearchWarningC(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchWarningD(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchResultC(null);\r\n      setShowSearchAgainButtonC(false);\r\n      setShowInputC(true);\r\n      setSearchResultD(null);\r\n      setShowSearchAgainButtonD(false);\r\n      setShowInputD(true);\r\n    }\r\n    if (\r\n      filteredDataA.length > 0 &&\r\n      filteredDataB.length <= 0 &&\r\n      filteredDataC.length > 0 &&\r\n      filteredDataD.length <= 0 &&\r\n      historicalDates.length <= 0\r\n    ) {\r\n      console.log(\"12\");\r\n      setSearchWarningB(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchWarningD(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchResultB(null);\r\n      setShowSearchAgainButtonB(false);\r\n      setShowInputB(true);\r\n      setSearchResultD(null);\r\n      setShowSearchAgainButtonD(false);\r\n      setShowInputD(true);\r\n    }\r\n    if (\r\n      filteredDataA.length > 0 &&\r\n      filteredDataB.length > 0 &&\r\n      filteredDataC.length > 0 &&\r\n      filteredDataD.length <= 0 &&\r\n      historicalDates.length <= 0\r\n    ) {\r\n      console.log(\"13\");\r\n      setSearchWarningD(\r\n        \"Search for a new asset. This one does not have enough data\"\r\n      );\r\n      setSearchResultD(null);\r\n      setShowSearchAgainButtonD(false);\r\n      setShowInputD(true);\r\n    }\r\n    if (\r\n      filteredDataA.length > 0 &&\r\n      filteredDataB.length > 0 &&\r\n      filteredDataC.length > 0 &&\r\n      filteredDataD.length > 0\r\n    ) {\r\n      setButtonNextDisabled(false);\r\n      setSearchResultA(lastValidSearchResultA);\r\n      setSearchResultB(lastValidSearchResultB);\r\n      setSearchResultC(lastValidSearchResultC);\r\n      setSearchResultD(lastValidSearchResultD);\r\n      setShowSearchAgainButtonA(true);\r\n      setShowInputA(false);\r\n      setShowSearchAgainButtonB(true);\r\n      setShowInputB(false);\r\n      setShowSearchAgainButtonC(true);\r\n      setShowInputC(false);\r\n      setShowSearchAgainButtonD(true);\r\n      setShowInputD(false);\r\n    }\r\n\r\n    setLineChartData({\r\n      labels: historicalDates,\r\n      datasets: [\r\n        {\r\n          label: assetSymbolA,\r\n          data: filteredDataA,\r\n          fill: false,\r\n          borderColor: \"green\",\r\n          tension: 0.1,\r\n        },\r\n        {\r\n          label: assetSymbolB,\r\n          data: filteredDataB,\r\n          fill: false,\r\n          borderColor: \"blue\",\r\n          tension: 0.1,\r\n        },\r\n        {\r\n          label: assetSymbolC,\r\n          data: filteredDataC,\r\n          fill: false,\r\n          borderColor: \"pink\",\r\n          tension: 0.1,\r\n        },\r\n        {\r\n          label: assetSymbolD,\r\n          data: filteredDataD,\r\n          fill: false,\r\n          borderColor: \"purple\",\r\n          tension: 0.1,\r\n        },\r\n      ],\r\n    });\r\n  }, [\r\n    filteredDataA,\r\n    filteredDataB,\r\n    filteredDataC,\r\n    filteredDataD,\r\n    assetSymbolA,\r\n    assetSymbolB,\r\n    assetSymbolC,\r\n    assetSymbolD,\r\n    historicalDates,\r\n    lastValidSearchResultA,\r\n    lastValidSearchResultB,\r\n    lastValidSearchResultC,\r\n    lastValidSearchResultD,\r\n  ]);\r\n\r\n  const options = {\r\n    plugins: {\r\n      legend: {\r\n        position: \"bottom\",\r\n      },\r\n      tooltip: {\r\n        callbacks: {\r\n          label: (context) => {\r\n            let label = context.dataset.label || \"\";\r\n            if (label) {\r\n              label += \": \";\r\n            }\r\n            if (context.parsed.y !== null) {\r\n              label += context.parsed.y.toFixed(2) + \"%\";\r\n            }\r\n            return label;\r\n          },\r\n        },\r\n      },\r\n    },\r\n    scales: {\r\n      y: {\r\n        ticks: {\r\n          callback: function (value) {\r\n            return value.toString() + \"%\";\r\n          },\r\n        },\r\n      },\r\n    },\r\n  };\r\n\r\n  const handleClearButtonClick = () => {\r\n    // Reset relevant states\r\n    setSearchStateA({\r\n      companyName: \"\",\r\n      hasSearched: false,\r\n      suggestions: [],\r\n    });\r\n    setSearchStateB({\r\n      companyName: \"\",\r\n      hasSearched: false,\r\n      suggestions: [],\r\n    });\r\n    setSearchStateC({\r\n      companyName: \"\",\r\n      hasSearched: false,\r\n      suggestions: [],\r\n    });\r\n    setSearchStateD({\r\n      companyName: \"\",\r\n      hasSearched: false,\r\n      suggestions: [],\r\n    });\r\n    setSearchResultA(null);\r\n    setSearchResultB(null);\r\n    setSearchResultC(null);\r\n    setSearchResultD(null);\r\n    setSearchWarningA(\"Please search for an asset\");\r\n    setSearchWarningB(\"Please search for an asset\");\r\n    setSearchWarningC(\"Please search for an asset\");\r\n    setSearchWarningD(\"Please search for an asset\");\r\n    setShowInputA(true);\r\n    setShowInputB(true);\r\n    setShowInputC(true);\r\n    setShowInputD(true);\r\n    setShowSearchAgainButtonA(false);\r\n    setShowSearchAgainButtonB(false);\r\n    setShowSearchAgainButtonC(false);\r\n    setShowSearchAgainButtonD(false);\r\n    setStartDate(\"\");\r\n    setEndDate(\"\");\r\n    setAssetSymbolA(\"\");\r\n    setAssetSymbolB(\"\");\r\n    setAssetSymbolC(\"\");\r\n    setAssetSymbolD(\"\");\r\n    setLineChartData({});\r\n    setFilteredDataA([]);\r\n    setFilteredDataB([]);\r\n    setFilteredDataC([]);\r\n    setFilteredDataD([]);\r\n    setButtonNextDisabled(true);\r\n  };\r\n\r\n  const handleNextButtonClick = async () => {\r\n    if (showNext === true) {\r\n      setShowNext(false);\r\n      setClickedInfos([]);\r\n      console.log(false);\r\n    } else if (showNext === false) {\r\n      setShowNext(true);\r\n      console.log(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Check if risk-free rate is cached in session storage\r\n    const cachedRate = sessionStorage.getItem(\"riskFreeRate\");\r\n\r\n    if (cachedRate) {\r\n      // If cached rate exists, set it as the risk-free rate\r\n      setRiskFreeRate(parseFloat(cachedRate));\r\n    } else {\r\n      // If cached rate doesn't exist, fetch the first risk-free rate data point\r\n      async function fetchRiskFreeRate() {\r\n        // Define API key and URL for fetching risk-free rate data\r\n        const apiKey = \"M4H1P0NX0B015FR8\";\r\n        const url = `https://www.alphavantage.co/query?function=TREASURY_YIELD&interval=monthly&maturity=3month&apikey=${apiKey}`;\r\n\r\n        try {\r\n          // Fetch data from the API\r\n          const response = await fetch(url);\r\n          const data = await response.json();\r\n\r\n          // Check if the response contains valid data\r\n          if (data[\"data\"] && data[\"data\"].length > 0) {\r\n            // Extract the first risk-free rate from the response data\r\n            const firstRate = parseFloat(data[\"data\"][0][\"value\"]);\r\n\r\n            // Cache the first risk-free rate in session storage\r\n            sessionStorage.setItem(\"riskFreeRate\", firstRate);\r\n\r\n            // Set the first risk-free rate as the state variable\r\n            setRiskFreeRate(firstRate);\r\n\r\n            // Log the response data and the first rate for debugging\r\n            console.log(data, firstRate);\r\n          } else {\r\n            // Log an error if the API response format is unexpected\r\n            console.error(\"Unexpected API response format:\", data);\r\n          }\r\n        } catch (error) {\r\n          // Log an error if there's an issue fetching the risk-free rate\r\n          console.error(\"Error fetching risk-free rate:\", error);\r\n        }\r\n      }\r\n\r\n      // Call the fetchRiskFreeRate function to fetch the first risk-free rate data point\r\n      fetchRiskFreeRate();\r\n    }\r\n  }, []);\r\n\r\n  const calculatePortfolioMetrics = useCallback(\r\n    (weights) => {\r\n      const portfolioReturn = weights.reduce(\r\n        (acc, weight, index) => acc + weight * assetsReturn[index],\r\n        0\r\n      );\r\n\r\n      let portfolioVolatility = 0;\r\n      for (let i = 0; i < weights.length; i++) {\r\n        for (let j = 0; j < weights.length; j++) {\r\n          portfolioVolatility +=\r\n            weights[i] *\r\n            weights[j] *\r\n            assetsVol[i] *\r\n            assetsVol[j] *\r\n            assetsCorrelationMatrix[i][j];\r\n        }\r\n      }\r\n      const portfolioVolatilitySqrt = Math.sqrt(portfolioVolatility);\r\n\r\n      const sharpeRatio =\r\n        (portfolioReturn - riskFreeRate) / portfolioVolatilitySqrt;\r\n\r\n      return {\r\n        return: portfolioReturn,\r\n        volatility: portfolioVolatilitySqrt,\r\n        sharpeRatio,\r\n      };\r\n    },\r\n    [assetsReturn, assetsVol, assetsCorrelationMatrix, riskFreeRate]\r\n  );\r\n\r\n  const optimizePortfolio = useCallback(\r\n    (initialWeights, targetReturn) => {\r\n      const tolerance = 0.00001;\r\n      let currentWeights = initialWeights.slice();\r\n      let learningRate = 0.001;\r\n      let iteration = 0;\r\n      const maxIterations = 1000;\r\n\r\n      const calculateReturn = (weights) => {\r\n        return weights.reduce(\r\n          (acc, weight, index) => acc + weight * assetsReturn[index],\r\n          0\r\n        );\r\n      };\r\n\r\n      const calculateVariance = (weights) => {\r\n        let variance = 0;\r\n        for (let i = 0; i < weights.length; i++) {\r\n          for (let j = 0; j < weights.length; j++) {\r\n            variance +=\r\n              weights[i] *\r\n              weights[j] *\r\n              assetsVol[i] *\r\n              assetsVol[j] *\r\n              assetsCorrelationMatrix[i][j];\r\n          }\r\n        }\r\n        return variance;\r\n      };\r\n\r\n      const objectiveFunction = (weights) => {\r\n        const portReturn = calculateReturn(weights);\r\n        const portVariance = calculateVariance(weights);\r\n        const penalty = 100 * Math.pow(portReturn - targetReturn, 2);\r\n        return portVariance + penalty;\r\n      };\r\n\r\n      const calculateGradient = (weights) => {\r\n        const gradient = Array(weights.length).fill(0);\r\n        const delta = 0.00001;\r\n\r\n        for (let index = 0; index < weights.length; index++) {\r\n          const weightPlus = weights.slice();\r\n          weightPlus[index] += delta;\r\n          const objectivePlus = objectiveFunction(weightPlus);\r\n          const objectiveCurrent = objectiveFunction(weights);\r\n          gradient[index] = (objectivePlus - objectiveCurrent) / delta;\r\n        }\r\n\r\n        return gradient;\r\n      };\r\n\r\n      const updateWeights = (weights, gradients) => {\r\n        const newWeights = weights.map(\r\n          (weight, index) => weight - learningRate * gradients[index]\r\n        );\r\n        const totalWeight = newWeights.reduce((a, b) => a + b, 0);\r\n        return newWeights.map((weight) => weight / totalWeight);\r\n      };\r\n\r\n      while (iteration < maxIterations) {\r\n        const gradients = calculateGradient(currentWeights);\r\n        const updatedWeights = updateWeights(currentWeights, gradients);\r\n\r\n        const change = currentWeights.reduce(\r\n          (acc, weight, i) => acc + Math.abs(weight - updatedWeights[i]),\r\n          0\r\n        );\r\n\r\n        currentWeights = updatedWeights;\r\n\r\n        if (change < tolerance) {\r\n          break;\r\n        }\r\n\r\n        iteration++;\r\n        // Decay learning rate\r\n        learningRate *= 0.99;\r\n      }\r\n\r\n      return currentWeights;\r\n    },\r\n    [assetsReturn, assetsVol, assetsCorrelationMatrix]\r\n  );\r\n\r\n  const findEfficientFrontier = useCallback(() => {\r\n    const validAssetsReturn = assetsReturn.filter(\r\n      (assetReturn) => assetReturn !== null && assetReturn !== undefined\r\n    );\r\n\r\n    if (validAssetsReturn.length === 0) {\r\n      return { portfolios: [], volatilities: [] };\r\n    }\r\n\r\n    // Define minimum and maximum returns\r\n    const minReturn = Math.min(...validAssetsReturn);\r\n    const maxReturn = Math.max(...validAssetsReturn);\r\n\r\n    // Generate 100 target returns evenly distributed between min and max returns\r\n    const targetReturns = Array.from(\r\n      { length: 100 },\r\n      (_, i) => minReturn + (maxReturn - minReturn) * (i / 99)\r\n    );\r\n\r\n    const portfolios = targetReturns.map((targetReturn) => {\r\n      const initialWeights = Array.from(\r\n        { length: validAssetsReturn.length },\r\n        () => 1 / validAssetsReturn.length\r\n      );\r\n      const optimizedWeights = optimizePortfolio(initialWeights, targetReturn);\r\n      return calculatePortfolioMetrics(optimizedWeights);\r\n    });\r\n\r\n    // Extract volatilities (standard deviation) of the portfolios\r\n    const volatilities = portfolios.map(\r\n      (portfolio) => portfolio.standardDeviation\r\n    );\r\n\r\n    return { portfolios, volatilities };\r\n  }, [assetsReturn, optimizePortfolio, calculatePortfolioMetrics]);\r\n\r\n  const generateRandomPortfolios = useCallback(() => {\r\n    // Obtain the efficient frontier portfolios and volatilities\r\n    const { volatilities } = findEfficientFrontier();\r\n\r\n    if (volatilities.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    // Calculate average volatility or use another metric\r\n    const averageVolatility =\r\n      volatilities.reduce((a, b) => a + b, 0) / volatilities.length;\r\n\r\n    // Set default exponents to avoid issues\r\n    const exponentHigh = Math.min(1, averageVolatility / 10) || 1;\r\n    const exponentLow = Math.min(1, averageVolatility / 100) || 1;\r\n\r\n    const numPortfolios = 500;\r\n    return Array.from({ length: numPortfolios }, () => {\r\n      // Generate weights with more variability\r\n      const rawWeights = Array.from({ length: assetsReturn.length }, () => {\r\n        const randomValue = Math.random();\r\n        const exponent = randomValue > 0.5 ? exponentHigh : exponentLow;\r\n        return Math.pow(randomValue, exponent);\r\n      });\r\n\r\n      const totalWeight = rawWeights.reduce((acc, curr) => acc + curr, 0);\r\n      if (totalWeight === 0 || isNaN(totalWeight)) {\r\n        console.error(\"Invalid total weight:\", totalWeight);\r\n        return { return: NaN, volatility: NaN, sharpeRatio: NaN };\r\n      }\r\n\r\n      const normalizedWeights = rawWeights.map(\r\n        (weight) => weight / totalWeight\r\n      );\r\n\r\n      return calculatePortfolioMetrics(normalizedWeights);\r\n    });\r\n  }, [assetsReturn, findEfficientFrontier, calculatePortfolioMetrics]);\r\n\r\n  useEffect(() => {\r\n    if (riskFreeRate !== null) {\r\n      setMonteCarloPortfolios(generateRandomPortfolios());\r\n      setEfficientFrontierData(findEfficientFrontier());\r\n    }\r\n  }, [riskFreeRate, generateRandomPortfolios, findEfficientFrontier]);\r\n\r\n  const calculateBestOutcome = useCallback(\r\n    (percentile) => {\r\n      const sortedReturns = monteCarloPortfolios\r\n        .map((p) => p.return)\r\n        .sort((a, b) => a - b);\r\n      const index = Math.ceil(percentile * sortedReturns.length) - 1;\r\n      return sortedReturns[index];\r\n    },\r\n    [monteCarloPortfolios]\r\n  );\r\n\r\n  useEffect(() => {\r\n    const isEfficientFrontierArray = Array.isArray(\r\n      efficientFrontierData.portfolios\r\n    );\r\n\r\n    if (chartContainerRef.current && showNext && isEfficientFrontierArray) {\r\n      const formattedEfficientFrontierData =\r\n        efficientFrontierData.portfolios.map((portfolio) => ({\r\n          x: portfolio.volatility,\r\n          y: portfolio.return,\r\n        }));\r\n\r\n      const ctx = chartContainerRef.current.getContext(\"2d\");\r\n      if (chartInstanceRef.current) {\r\n        chartInstanceRef.current.destroy();\r\n      }\r\n\r\n      chartInstanceRef.current = new Chart(ctx, {\r\n        type: \"scatter\",\r\n        data: {\r\n          datasets: [\r\n            {\r\n              label: \"Efficient Frontier\",\r\n              data: formattedEfficientFrontierData,\r\n              backgroundColor: \"transparent\",\r\n              borderColor: \"red\",\r\n              borderWidth: 2,\r\n              pointRadius: 0,\r\n              showLine: true,\r\n              fill: false,\r\n            },\r\n            {\r\n              label: \"Random Portfolios\",\r\n              data: monteCarloPortfolios.map((portfolio) => ({\r\n                x: portfolio.volatility,\r\n                y: portfolio.return,\r\n              })),\r\n              backgroundColor: \"rgba(128, 128, 128, 0.5)\",\r\n              pointRadius: 3,\r\n            },\r\n          ],\r\n        },\r\n        options: {\r\n          responsive: true,\r\n          plugins: {\r\n            tooltip: {\r\n              mode: \"point\",\r\n              intersect: false,\r\n              callbacks: {\r\n                label: function (context) {\r\n                  return `Return: ${context.parsed.y.toFixed(\r\n                    2\r\n                  )}%, Volatility: ${context.parsed.x.toFixed(2)}%`;\r\n                },\r\n              },\r\n            },\r\n          },\r\n          scales: {\r\n            x: {\r\n              title: {\r\n                display: true,\r\n                text: \"Volatility (Standard Deviation)\",\r\n              },\r\n              beginAtZero: false,\r\n            },\r\n            y: {\r\n              title: {\r\n                display: true,\r\n                text: \"Expected Return\",\r\n              },\r\n              beginAtZero: false,\r\n            },\r\n          },\r\n          onClick: (event, elements) => {\r\n            if (elements.length > 0) {\r\n              elements.forEach((element) => {\r\n                const datasetIndex = element.datasetIndex;\r\n                const dataIndex = element.index;\r\n                let clickedPortfolio;\r\n\r\n                if (datasetIndex === 1) {\r\n                  // Random Portfolios dataset\r\n                  clickedPortfolio = monteCarloPortfolios[dataIndex];\r\n                } else if (datasetIndex === 0) {\r\n                  // Efficient Frontier dataset\r\n                  clickedPortfolio =\r\n                    efficientFrontierData.portfolios[dataIndex];\r\n                }\r\n\r\n                if (clickedPortfolio) {\r\n                  const bestOutcomeReturn = calculateBestOutcome(0.99);\r\n                  const clickedWeights = optimizePortfolio(\r\n                    Array.from(\r\n                      { length: assetsReturn.length },\r\n                      () => 1 / assetsReturn.length\r\n                    ),\r\n                    clickedPortfolio.return\r\n                  ).map((weight) => (weight * 100).toFixed(2));\r\n\r\n                  const portfolioComponents = assetsReturn.map(\r\n                    (assetReturn, index) =>\r\n                      `Asset ${index + 1}: ${clickedWeights[index]}%`\r\n                  );\r\n\r\n                  const cardInfo = {\r\n                    return: clickedPortfolio.return.toFixed(2),\r\n                    volatility: clickedPortfolio.volatility.toFixed(2),\r\n                    bestOutcomeReturn: (bestOutcomeReturn * 100).toFixed(2),\r\n                    portfolioComponents,\r\n                  };\r\n\r\n                  console.log(\"Clicked Portfolio Information\", cardInfo);\r\n                  setClickedInfos((prevInfos) => [...prevInfos, cardInfo]);\r\n                }\r\n              });\r\n            }\r\n          },\r\n        },\r\n      });\r\n\r\n      return () => {\r\n        if (chartInstanceRef.current) {\r\n          chartInstanceRef.current.destroy();\r\n        }\r\n      };\r\n    }\r\n  }, [\r\n    monteCarloPortfolios,\r\n    efficientFrontierData,\r\n    optimizePortfolio,\r\n    assetsReturn,\r\n    calculateBestOutcome,\r\n    showNext,\r\n  ]);\r\n\r\n  return (\r\n    <div className=\"dashboard\">\r\n      <div className=\"page-title\">\r\n        {/* Link to home */}\r\n        <Link to=\"/\" className=\"custom-link\">\r\n          <h2>Placeholder</h2>\r\n        </Link>\r\n      </div>\r\n      <div className=\"container-middle\">\r\n        <div>\r\n          {!showNext ? (\r\n            <div>\r\n              <div className=\"controls\">\r\n                {/* Buttons to show/hide content */}\r\n                <button\r\n                  ref={wrapperRefSelectAssets}\r\n                  onClick={handleSelectAssetsClick}\r\n                >\r\n                  Select assets\r\n                </button>\r\n                <button\r\n                  ref={wrapperRefStartDate}\r\n                  onClick={handleStartDateClick}\r\n                >\r\n                  Start date\r\n                </button>\r\n                <button ref={wrapperRefEndDate} onClick={handleEndDateClick}>\r\n                  End date\r\n                </button>\r\n                <button ref={wrapperRefInterval} onClick={handleIntervalClick}>\r\n                  Interval\r\n                </button>\r\n              </div>\r\n              <div className=\"chart-container\">\r\n                <div>\r\n                  {showSelectAssets && (\r\n                    <div\r\n                      ref={wrapperRefSelectAssets}\r\n                      className={`select-assets-content ${\r\n                        showSelectAssets ? \"visible\" : \"\"\r\n                      }`}\r\n                    >\r\n                      {/* Asset A search input */}\r\n                      {showInputA && (\r\n                        <div ref={wrapperRefA}>\r\n                          <input\r\n                            type=\"text\"\r\n                            value={searchStateA.companyName}\r\n                            onChange={handleInputChangeA}\r\n                            placeholder=\"Enter company name\"\r\n                          />\r\n                          {/* Display search suggestions */}\r\n                          {searchStateA.suggestions.length > 0 && (\r\n                            <div className=\"suggestion-dropdown\">\r\n                              <ul>\r\n                                {searchStateA.suggestions.map((item) => (\r\n                                  <li\r\n                                    key={item.symbol}\r\n                                    onClick={() =>\r\n                                      handleSuggestionClickA(\r\n                                        item.name,\r\n                                        item.symbol\r\n                                      )\r\n                                    }\r\n                                  >\r\n                                    {item.name} ({item.symbol})\r\n                                  </li>\r\n                                ))}\r\n                              </ul>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n                      {/* Show search again button for Asset A */}\r\n                      {showSearchAgainButtonA && (\r\n                        <button\r\n                          onClick={() => {\r\n                            setShowInputA(true);\r\n                            setShowSearchAgainButtonA(false);\r\n                            setSearchResultA(null);\r\n                            setSearchWarningA(\"Please search for an asset\");\r\n                          }}\r\n                        >\r\n                          Search Again\r\n                        </button>\r\n                      )}\r\n                      {/* Display search results or warning for Asset A */}\r\n                      {searchResultA && searchResultA.length > 0 ? (\r\n                        <div>\r\n                          <h2>Search Results:</h2>\r\n                          <ul>\r\n                            {searchResultA.map((item) => (\r\n                              <li key={item.symbol}>\r\n                                <strong>Name:</strong> {item.name}\r\n                                <strong>Symbol:</strong> {item.symbol}\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                      ) : (\r\n                        <p>{searchWarningA}</p>\r\n                      )}\r\n                      {/* Asset B search input */}\r\n                      {showInputB && (\r\n                        <div ref={wrapperRefB}>\r\n                          <input\r\n                            type=\"text\"\r\n                            value={searchStateB.companyName}\r\n                            onChange={handleInputChangeB}\r\n                            placeholder=\"Enter company name\"\r\n                          />\r\n                          {/* Display search suggestions */}\r\n                          {searchStateB.suggestions.length > 0 && (\r\n                            <div className=\"suggestion-dropdown\">\r\n                              <ul>\r\n                                {searchStateB.suggestions.map((item) => (\r\n                                  <li\r\n                                    key={item.symbol}\r\n                                    onClick={() =>\r\n                                      handleSuggestionClickB(\r\n                                        item.name,\r\n                                        item.symbol\r\n                                      )\r\n                                    }\r\n                                  >\r\n                                    {item.name} ({item.symbol})\r\n                                  </li>\r\n                                ))}\r\n                              </ul>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n                      {/* Show search again button for Asset B */}\r\n                      {showSearchAgainButtonB && (\r\n                        <button\r\n                          onClick={() => {\r\n                            setShowInputB(true);\r\n                            setShowSearchAgainButtonB(false);\r\n                            setSearchResultB(null);\r\n                            setSearchWarningB(\"Please search for an asset\");\r\n                          }}\r\n                        >\r\n                          Search Again\r\n                        </button>\r\n                      )}\r\n                      {/* Display search results or warning for Asset B */}\r\n                      {searchResultB && searchResultB.length > 0 ? (\r\n                        <div>\r\n                          <h2>Search Results:</h2>\r\n                          <ul>\r\n                            {searchResultB.map((item) => (\r\n                              <li key={item.symbol}>\r\n                                <strong>Name:</strong> {item.name}\r\n                                <strong>Symbol:</strong> {item.symbol}\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                      ) : (\r\n                        <p>{searchWarningB}</p>\r\n                      )}\r\n                      {/* Asset C search input */}\r\n                      {showInputC && (\r\n                        <div ref={wrapperRefC}>\r\n                          <input\r\n                            type=\"text\"\r\n                            value={searchStateC.companyName}\r\n                            onChange={handleInputChangeC}\r\n                            placeholder=\"Enter company name\"\r\n                          />\r\n                          {/* Display search suggestions */}\r\n                          {searchStateC.suggestions.length > 0 && (\r\n                            <div className=\"suggestion-dropdown\">\r\n                              <ul>\r\n                                {searchStateC.suggestions.map((item) => (\r\n                                  <li\r\n                                    key={item.symbol}\r\n                                    onClick={() =>\r\n                                      handleSuggestionClickC(\r\n                                        item.name,\r\n                                        item.symbol\r\n                                      )\r\n                                    }\r\n                                  >\r\n                                    {item.name} ({item.symbol})\r\n                                  </li>\r\n                                ))}\r\n                              </ul>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n                      {/* Show search again button for Asset C */}\r\n                      {showSearchAgainButtonC && (\r\n                        <button\r\n                          onClick={() => {\r\n                            setShowInputC(true);\r\n                            setShowSearchAgainButtonC(false);\r\n                            setSearchResultC(null);\r\n                            setSearchWarningC(\"Please search for an asset\");\r\n                          }}\r\n                        >\r\n                          Search Again\r\n                        </button>\r\n                      )}\r\n                      {/* Display search results or warning for Asset C */}\r\n                      {searchResultC && searchResultC.length > 0 ? (\r\n                        <div>\r\n                          <h2>Search Results:</h2>\r\n                          <ul>\r\n                            {searchResultC.map((item) => (\r\n                              <li key={item.symbol}>\r\n                                <strong>Name:</strong> {item.name}\r\n                                <strong>Symbol:</strong> {item.symbol}\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                      ) : (\r\n                        <p>{searchWarningC}</p>\r\n                      )}\r\n                      {/* Asset D search input */}\r\n                      {showInputD && (\r\n                        <div ref={wrapperRefD}>\r\n                          <input\r\n                            type=\"text\"\r\n                            value={searchStateD.companyName}\r\n                            onChange={handleInputChangeD}\r\n                            placeholder=\"Enter company name\"\r\n                          />\r\n                          {/* Display search suggestions */}\r\n                          {searchStateD.suggestions.length > 0 && (\r\n                            <div className=\"suggestion-dropdown\">\r\n                              <ul>\r\n                                {searchStateD.suggestions.map((item) => (\r\n                                  <li\r\n                                    key={item.symbol}\r\n                                    onClick={() =>\r\n                                      handleSuggestionClickD(\r\n                                        item.name,\r\n                                        item.symbol\r\n                                      )\r\n                                    }\r\n                                  >\r\n                                    {item.name} ({item.symbol})\r\n                                  </li>\r\n                                ))}\r\n                              </ul>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n                      {/* Show search again button for Asset D */}\r\n                      {showSearchAgainButtonD && (\r\n                        <button\r\n                          onClick={() => {\r\n                            setShowInputD(true);\r\n                            setShowSearchAgainButtonD(false);\r\n                            setSearchResultD(null);\r\n                            setSearchWarningD(\"Please search for an asset\");\r\n                          }}\r\n                        >\r\n                          Search Again\r\n                        </button>\r\n                      )}\r\n                      {/* Display search results or warning for Asset D */}\r\n                      {searchResultD && searchResultD.length > 0 ? (\r\n                        <div>\r\n                          <h2>Search Results:</h2>\r\n                          <ul>\r\n                            {searchResultD.map((item) => (\r\n                              <li key={item.symbol}>\r\n                                <strong>Name:</strong> {item.name}\r\n                                <strong>Symbol:</strong> {item.symbol}\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                      ) : (\r\n                        <p>{searchWarningD}</p>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                  {showStartDate && (\r\n                    <div\r\n                      ref={wrapperRefStartDate}\r\n                      className=\"start-date-content visible\"\r\n                    >\r\n                      <p>Please select a start date for the portfolio</p>\r\n                      <input\r\n                        type=\"date\"\r\n                        value={startDate}\r\n                        onChange={(e) => setStartDate(e.target.value)}\r\n                        max={getYesterday()}\r\n                      />\r\n                    </div>\r\n                  )}\r\n                  {showEndDate && (\r\n                    <div\r\n                      ref={wrapperRefEndDate}\r\n                      className=\"end-date-content visible\"\r\n                    >\r\n                      <p>Please select an end date for the portfolio</p>\r\n                      <input\r\n                        type=\"date\"\r\n                        value={endDate}\r\n                        onChange={(e) => setEndDate(e.target.value)}\r\n                      />\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                <div>\r\n                  {showInterval && (\r\n                    <div\r\n                      ref={wrapperRefInterval}\r\n                      className=\"interval-content visible\"\r\n                    >\r\n                      <p>Please select an interval for the portfolio</p>\r\n                      <div>\r\n                        {\" \"}\r\n                        <select\r\n                          value={interval}\r\n                          onChange={(e) => setInterval(e.target.value)}\r\n                        >\r\n                          <option value=\"Interval\">Interval</option>\r\n                          <option value=\"1m\">1 Minute</option>\r\n                          <option value=\"5m\">5 Minutes</option>\r\n                          <option value=\"15m\">15 Minutes</option>\r\n                          <option value=\"30m\">30 Minutes</option>\r\n                          <option value=\"1hour\">1 Hour</option>\r\n                          <option value=\"4hour\">4 Hour</option>\r\n                          <option value=\"Daily\">Daily</option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  <div className=\"return-chart\">\r\n                    {Object.keys(lineChartData).length > 0 && (\r\n                      <Line data={lineChartData} options={options} />\r\n                    )}\r\n                  </div>\r\n                  <div className=\"buttons-container\">\r\n                    <button\r\n                      onClick={handleClearButtonClick}\r\n                      className=\"btn clear\"\r\n                    >\r\n                      Clear\r\n                    </button>\r\n                    {buttonNextDisabled ? (\r\n                      <button\r\n                        disabled={buttonNextDisabled}\r\n                        className=\"btn next\"\r\n                      >\r\n                        Next\r\n                      </button>\r\n                    ) : (\r\n                      <button\r\n                        onClick={handleNextButtonClick}\r\n                        className=\"btn next\"\r\n                      >\r\n                        Next\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"monte-carlo-chart\">\r\n              <div className=\"chart-container-monte-carlo\">\r\n                <canvas\r\n                  ref={chartContainerRef}\r\n                  width=\"400\"\r\n                  height=\"400\"\r\n                ></canvas>\r\n                <div className=\"btn-back-container\">\r\n                  <button className=\"btn back\" onClick={handleNextButtonClick}>\r\n                    Back\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              <div className=\"clicked-info\">\r\n                {clickedInfos.map((clickedInfo, index) => (\r\n                  <div key={index} className=\"clicked-info-card\">\r\n                    <h4>Portfolio {index + 1}</h4>\r\n                    <p>\r\n                      Expected Return:{\" \"}\r\n                      <span className=\"portfolio-component\">\r\n                        {clickedInfo.return}%\r\n                      </span>\r\n                    </p>\r\n                    <p>\r\n                      Risk (CVaR 1%):{\" \"}\r\n                      <span className=\"portfolio-component\">\r\n                        {clickedInfo.volatility}%\r\n                      </span>\r\n                    </p>\r\n                    <p>\r\n                      Best Outcome (CVaR 99%):{\" \"}\r\n                      <span className=\"portfolio-component\">\r\n                        {clickedInfo.bestOutcomeReturn}%\r\n                      </span>\r\n                    </p>\r\n                    <div className=\"portfolio-components-wrapper\">\r\n                      <p>Portfolio Components:</p>\r\n                      <div className=\"portfolio-components\">\r\n                        {clickedInfo.portfolioComponents.map(\r\n                          (component, index) => (\r\n                            <span key={index} className=\"portfolio-component\">\r\n                              {component}\r\n                            </span>\r\n                          )\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"button-group\">\r\n                      <button className=\"btn delete\">Delete</button>\r\n                      <button className=\"btn save\">Save</button>\r\n                      <button className=\"btn buy\">Buy</button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {/* Profile information and navigation */}\r\n      <div className=\"profile\">\r\n        <div className=\"username\">{username}</div>\r\n        <img src={portrait} alt=\" \"></img>\r\n      </div>\r\n      {/* Navigation links */}\r\n      <div className=\"containers-left\">\r\n        {/* Dashboard links */}\r\n        <div className=\"first-container\">\r\n          <Link to=\"/dashboard\" className=\"custom-link\">\r\n            <h3 className=\"first-container-text\">Dashboard</h3>\r\n          </Link>\r\n        </div>\r\n        {/* Investment-related links */}\r\n        <div className=\"second-container\">\r\n          {/* Highlighted \"Invest\" link */}\r\n          <Link to=\"/dashboard/invest\" className=\"custom-link\">\r\n            <h4\r\n              className=\"second-container-text\"\r\n              style={{ backgroundColor: \"rgb(161, 161, 161)\" }}\r\n            >\r\n              Invest\r\n            </h4>\r\n          </Link>\r\n          <Link to=\"/dashboard/watchlist\" className=\"custom-link\">\r\n            <h4 className=\"second-container-text\">Watchlist</h4>\r\n          </Link>\r\n          <Link to=\"/dashboard/portfolios\" className=\"custom-link\">\r\n            <h4 className=\"second-container-text\">Portfolios</h4>\r\n          </Link>\r\n        </div>\r\n        {/* Profile and logout links */}\r\n        <div className=\"third-container\">\r\n          <Link to=\"/dashboard/profile\" className=\"custom-link\">\r\n            <h4 className=\"third-container-text\">Profile</h4>\r\n          </Link>\r\n          <h4 className=\"third-container-text\" onClick={toggleModal}>\r\n            Log out\r\n          </h4>\r\n        </div>\r\n        {/* Logout confirmation modal */}\r\n        <div className=\"modal-container\">\r\n          {modal && (\r\n            <div className=\"modal\">\r\n              <div onClick={toggleModal} className=\"overlay\"></div>\r\n              <div className=\"modal-content\">\r\n                <h2>Are you sure you want to log out?</h2>\r\n                <Link to=\"/\" className=\"custom-link\">\r\n                  <button className=\"modal-yes-btn\" onClick={handleLogout}>\r\n                    Yes\r\n                  </button>\r\n                </Link>\r\n                <button className=\"modal-no-btn\" onClick={toggleModal}>\r\n                  No\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Function to handle saving data for a single asset portfolio\r\n// const handleSavedDataOneAsset = async () => {\r\n//   const firstAssetName =\r\n//     searchResultA.length > 0 ? searchResultA[0].name : \"\";\r\n//   const data = {\r\n//     assets: 1,\r\n//     firstAsset: firstAssetName,\r\n//   };\r\n//   setSavedData([data]);\r\n\r\n//   try {\r\n//     const response = await axios.post(\r\n//       \"http://localhost:3002/save-data-portfolio\",\r\n//       {\r\n//         username: username,\r\n//         savedData: savedData,\r\n//       }\r\n//     );\r\n//     if (response.status === 200) {\r\n//       console.log(\"Data saved successfully\");\r\n//     }\r\n//   } catch (error) {\r\n//     console.error(\"Error saving risk array:\", error.message);\r\n//   }\r\n// };\r\n\r\n// Function to handle saving data for a two asset portfolio\r\n// const handleSavedDataTwoAssets = async () => {\r\n//   const firstAssetName =\r\n//     searchResultA.length > 0 ? searchResultA[0].name : \"\";\r\n//   const secondAssetName =\r\n//     searchResultA.length > 0 ? searchResultB[0].name : \"\";\r\n//   const data = {\r\n//     assets: 2,\r\n//     firstAsset: firstAssetName,\r\n//     secondAsset: secondAssetName,\r\n//   };\r\n//   setSavedData([data]);\r\n\r\n//   try {\r\n//     const response = await axios.post(\r\n//       \"http://localhost:3002/save-data-portfolio\",\r\n//       {\r\n//         username: username,\r\n//         savedData: savedData,\r\n//       }\r\n//     );\r\n//     if (response.status === 200) {\r\n//       console.log(\"Data saved successfully\");\r\n//     }\r\n//   } catch (error) {\r\n//     console.error(\"Error saving risk array:\", error.message);\r\n//   }\r\n// };\r\n\r\n// Fetch search results for asset A\r\n// useEffect(() => {\r\n//   if (!searchStateA.hasSearched || !searchStateA.companyName) return; // Return if search not performed or company name empty\r\n\r\n//   fetch(searchApiUrl) // Fetching data from API\r\n//     .then((response) => {\r\n//       if (!response.ok) {\r\n//         throw new Error(`HTTP error! status: ${response.status}`); // Handling HTTP error\r\n//       }\r\n//       return response.json(); // Parsing response as JSON\r\n//     })\r\n//     .then((data) => {\r\n//       if (!data) {\r\n//         console.error(\"Error: Data is null\"); // Handling null data\r\n//         setSearchResultA(null); // Setting search result to null\r\n//         setSearchWarningB(\"No matching company found.\"); // Setting search warning\r\n//         return;\r\n//       }\r\n\r\n//       const foundItem = data.find((item) => {\r\n//         if (!item || !item.name) return false;\r\n//         return item.name\r\n//           .toLowerCase()\r\n//           .includes(searchStateA.companyName.toLowerCase()); // Checking for matching company name\r\n//       });\r\n\r\n//       setSearchResultA(foundItem ? [foundItem] : []); // Setting search result\r\n//       setAssetSymbolA(foundItem ? foundItem.symbol : \"\"); // Setting asset symbol\r\n//       setSearchStateA({\r\n//         ...searchStateA,\r\n//         hasSearched: false,\r\n//       }); // Resetting search state\r\n//       setSearchWarningA(\"\"); // Clearing search warning\r\n//     })\r\n//     .catch((error) => {\r\n//       console.error(\"Error fetching data:\", error); // Handling fetch error\r\n//       setSearchResultA(null); // Setting search result to null\r\n//     });\r\n// }, [searchApiUrl, searchStateA]); // Dependencies for useEffect hook\r\n\r\n// Fetch search results for asset B\r\n// useEffect(() => {\r\n//   if (!searchStateB.hasSearched || !searchStateB.companyName) return; // Return if search not performed or company name empty\r\n\r\n//   fetch(searchApiUrl) // Fetching data from API\r\n//     .then((response) => {\r\n//       if (!response.ok) {\r\n//         throw new Error(`HTTP error! status: ${response.status}`); // Handling HTTP error\r\n//       }\r\n//       return response.json(); // Parsing response as JSON\r\n//     })\r\n//     .then((data) => {\r\n//       if (!data) {\r\n//         console.error(\"Error: Data is null\"); // Handling null data\r\n//         setSearchResultB(null); // Setting search result to null\r\n//         setSearchWarningB(\"No matching company found.\"); // Setting search warning\r\n//         return;\r\n//       }\r\n\r\n//       const foundItem = data.find((item) => {\r\n//         if (!item || !item.name) return false;\r\n//         return item.name\r\n//           .toLowerCase()\r\n//           .includes(searchStateB.companyName.toLowerCase()); // Checking for matching company name\r\n//       });\r\n\r\n//       setSearchResultB(foundItem ? [foundItem] : []); // Setting search result\r\n//       setAssetSymbolB(foundItem ? foundItem.symbol : \"\"); // Setting asset symbol\r\n//       setSearchStateB({\r\n//         ...searchStateB,\r\n//         hasSearched: false,\r\n//       }); // Resetting search state\r\n//       setSearchWarningB(\"\"); // Clearing search warning\r\n//     })\r\n//     .catch((error) => {\r\n//       console.error(\"Error fetching data:\", error); // Handling fetch error\r\n//       setSearchResultA(null); // Setting search result to null\r\n//     });\r\n// }, [searchApiUrl, searchStateB]); // Dependencies for useEffect hook\r\n"],"mappings":"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A,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAArY,EAAA,CAjzEwBD,eAAe;EAAA,QAIpBL,WAAW;AAAA;AAAAwZ,EAAA,GAJNnZ,eAAe;AAAA,IAAAmZ,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}